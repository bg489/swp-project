(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{1397:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var a=t(5155),l=t(2115),r=t(5863),n=t(3999);let i=l.forwardRef((e,s)=>{let{className:t,value:l,...i}=e;return(0,a.jsx)(r.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});i.displayName=r.bL.displayName},2288:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var a=t(5155),l=t(8074),r=t(5695),n=t(8482),i=t(7168),d=t(8145),c=t(4964),o=t(1397),u=t(1976),m=t(1243),x=t(5670),h=t(381),f=t(5525),g=t(7340),p=t(4835),j=t(7580),v=t(3109),y=t(8691),N=t(9397),b=t(9917),w=t(2525),_=t(4516),A=t(9446),C=t(3717),k=t(4616),R=t(6874),S=t.n(R),B=t(6766),T=t(395),Z=t(7746),q=t(2714),z=t(9852),D=t(3403),L=t(2115),V=t(5784),E=t(3568),W=t(5452),$=t(4416),J=t(3999);let K=W.bL;W.l9;let U=W.ZL;W.bm;let X=L.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(W.hJ,{ref:s,className:(0,J.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});X.displayName=W.hJ.displayName;let O=L.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(X,{}),(0,a.jsxs)(W.UC,{ref:s,className:(0,J.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[l,(0,a.jsxs)(W.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)($.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});O.displayName=W.UC.displayName;let F=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,J.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};F.displayName="DialogHeader";let H=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,J.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};H.displayName="DialogFooter";let I=L.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(W.hE,{ref:s,className:(0,J.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});I.displayName=W.hE.displayName;let P=L.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(W.VY,{ref:s,className:(0,J.cn)("text-sm text-muted-foreground",t),...l})});function Y(){let{user:e,logout:s,setUser:t}=(0,T.A)(),R=(0,r.useRouter)(),[W,$]=(0,L.useState)(null),[J,U]=(0,L.useState)(!0),[X,Y]=(0,L.useState)(-1),[M,G]=(0,L.useState)(""),[Q,ee]=(0,L.useState)(""),[es,et]=(0,L.useState)(""),[ea,el]=(0,L.useState)([]),er=(0,L.useRef)(null),[en,ei]=(0,L.useState)(!1),[ed,ec]=(0,L.useState)([]),[eo,eu]=(0,L.useState)(0),[em,ex]=(0,L.useState)(0),[eh,ef]=(0,L.useState)("staff"),[eg,ep]=(0,L.useState)(""),[ej,ev]=(0,L.useState)(""),[ey,eN]=(0,L.useState)(""),[eb,ew]=(0,L.useState)(""),[e_,eA]=(0,L.useState)([]),[eC,ek]=(0,L.useState)(null),[eR,eS]=(0,L.useState)(!1);(0,L.useEffect)(()=>{!async function(){try{let s=await D.A.get("/users/admin/get-all/".concat(null==e?void 0:e._id));eA(s.data.users)}catch(e){console.error("Lỗi khi lấy danh s\xe1ch bệnh viện:",e)}}()},[e]);let eB=async e=>{try{let s=(await D.A.put("/users/verify/".concat(e))).data;eA(t=>t.map(t=>t._id===e?{...t,is_verified:s.is_verified}:t)),E.Ay.success("Duyệt th\xe0nh c\xf4ng")}catch(e){E.Ay.error("Kh\xf4ng thể duyệt user"),console.error(e)}},eT=async s=>{console.log(eC);try{let s=(await D.A.put("/users/edit/".concat(null==eC?void 0:eC._id),{full_name:null==eC?void 0:eC.full_name,email:null==eC?void 0:eC.email,phone:null==eC?void 0:eC.phone,gender:null==eC?void 0:eC.gender,date_of_birth:null==eC?void 0:eC.date_of_birth,address:null==eC?void 0:eC.address,role:null==eC?void 0:eC.role})).data.user;eA(e=>e.map(e=>e._id===s._id?s:e)),t({...e,full_name:(null==eC?void 0:eC.full_name)||e.full_name}),eS(!1),E.Ay.success("Chỉnh sửa th\xf4ng tin t\xe0i khoản th\xe0nh c\xf4ng")}catch(e){E.Ay.error("Kh\xf4ng thể chỉnh sửa user"),console.error(e)}},eZ=async s=>{try{await D.A.delete("/users/admin/users/delete/".concat(null==e?void 0:e._id,"/").concat(s)),eA(e=>e.filter(e=>e._id!==s)),E.Ay.success("X\xf3a t\xe0i khoản th\xe0nh c\xf4ng")}catch(e){E.Ay.error("Kh\xf4ng thể x\xf3a user"),console.error(e)}},eq=async()=>{try{if("staff"===eh){let e=await D.A.post("/users/register",{full_name:eg,email:ej,password:ey,role:eh,phone:"0",gender:"other",date_of_birth:"",address:""});await D.A.put("/users/verify/".concat(e.data.user.id)),await D.A.post("/users/staff-profiles",{user_id:e.data.user.id,department:"0",assigned_area:"0",shift_time:"0",hospital:es})}else if("donor"===eh){let e=await D.A.post("/users/register",{full_name:eg,email:ej,password:ey,role:eh,phone:"0",gender:"other",date_of_birth:"",address:""});await D.A.put("/users/verify/".concat(e.data.user.id)),await D.A.post("/users/donor-profile",{user_id:e.data.user.id,blood_type:"unknown",availability_date:new Date().toISOString(),health_cert_url:"",cooldown_until:"",hospital:es})}else if("recipient"===eh){let e=await D.A.post("/users/register",{full_name:eg,email:ej,password:ey,role:eh,phone:"0",gender:"other",date_of_birth:"",address:""});await D.A.put("/users/verify/".concat(e.data.user.id)),await D.A.post("/users/recipient-profile",{user_id:e.data.user.id,medical_doc_url:"unknown",hospital:es})}E.Ay.success("Tạo t\xe0i khoản th\xe0nh c\xf4ng!"),ep(""),ev(""),eN(""),ew("")}catch(e){E.Ay.error("Lỗi khi tạo t\xe0i khoản."),console.error(e)}},ez=0;(0,L.useEffect)(()=>{function e(e){er.current&&!er.current.contains(e.target)&&(ei(!1),U(!1))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,L.useEffect)(()=>{(async function(){try{let e=(await D.A.get("/hospital/")).data.hospitals.map(e=>({_id:e._id,name:e.name,address:e.address,phone:e.phone}));el(e);let s=await D.A.get("/blood-in/blood-inventory/getAll");eu(s.data.inventories.reduce((e,s)=>e+s.quantity,0)),ex(s.data.inventories.reduce((e,s)=>e+s.expiring_quantity,0))}catch(e){console.error("Lỗi khi lấy danh s\xe1ch bệnh viện:",e)}})()},[]);let eD=async e=>{et(e._id),G(e.name),ee(e.name),U(!1),Y(-1);try{let s=await D.A.get("/blood-in/blood-inventory/hospital/".concat(e._id));ec(s.data.inventories)}catch(e){ec([])}},eL=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D"),eV=""===Q.trim()?ea:ea.filter(e=>eL(e.name.toLowerCase()).includes(eL(Q.toLowerCase()))),eE=e=>{if(J){if("ArrowDown"===e.key){let s=(X+1)%eV.length;Y(s),G(eV[s].name),e.preventDefault()}else if("ArrowUp"===e.key){let s=(X-1+eV.length)%eV.length;Y(s),G(eV[s].name),e.preventDefault()}else"Enter"===e.key&&X>=0&&(eD(eV[X]),e.preventDefault())}},eW=e=>{ee(e.target.value),G(e.target.value),U(!0),Y(-1)},e$=[{type:"O-",units:45,status:"low",target:100,color:"bg-red-500"},{type:"O+",units:120,status:"good",target:150,color:"bg-red-400"},{type:"A-",units:78,status:"medium",target:100,color:"bg-blue-500"},{type:"A+",units:156,status:"good",target:150,color:"bg-blue-400"},{type:"B-",units:34,status:"critical",target:80,color:"bg-green-500"},{type:"B+",units:89,status:"medium",target:120,color:"bg-green-400"},{type:"AB-",units:23,status:"critical",target:60,color:"bg-purple-500"},{type:"AB+",units:67,status:"medium",target:80,color:"bg-purple-400"}],eJ=[{id:1,type:"donation",message:"Nguyễn Văn A đ\xe3 ho\xe0n th\xe0nh hiến m\xe1u",time:"10 ph\xfat trước",icon:u.A,color:"text-green-600"},{id:2,type:"emergency",message:"Y\xeau cầu khẩn cấp từ BV Chợ Rẫy - O- 2 đơn vị",time:"25 ph\xfat trước",icon:m.A,color:"text-red-600"},{id:3,type:"registration",message:"3 người d\xf9ng mới đăng k\xfd hiến m\xe1u",time:"1 giờ trước",icon:x.A,color:"text-blue-600"},{id:4,type:"system",message:"Cập nhật hệ thống th\xe0nh c\xf4ng",time:"2 giờ trước",icon:h.A,color:"text-gray-600"}],eK=e=>e<30?"bg-red-100 text-red-800 border-red-200":e<100?"bg-orange-100 text-orange-800 border-orange-200":e<150?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200",eU=()=>{R.push("/admin/blood-inventory?hospitalId=".concat(es))};return(0,a.jsx)(l.O,{requiredRole:"admin",children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white border-b sticky top-0 z-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(S(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:(0,a.jsx)(B.default,{src:"/images/logo.webp",alt:"ScαrletBlood Logo",width:40,height:40,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ScαrletBlood Admin"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Bảng điều khiển quản trị"})]})]}),(0,a.jsxs)(d.E,{className:"bg-red-100 text-red-800",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"Quản trị vi\xean"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Xin ch\xe0o, ",(0,a.jsx)("strong",{children:null==e?void 0:e.full_name})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(S(),{href:"/",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Về trang chủ"]})}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{s()},children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Đăng xuất"]})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 flex-grow",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Tổng người d\xf9ng"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:2547..toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,a.jsxs)("span",{className:"text-green-600 flex items-center",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"+",12.5,"%"]})})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Đ\xe3 hết hạn"}),(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:em}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cần xem x\xe9t"})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Kho m\xe1u"}),(0,a.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:eo}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Đơn vị c\xf3 sẵn"})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Khẩn cấp"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:23}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Đang xử l\xfd"})]})]})]}),(0,a.jsxs)(c.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-6",children:[(0,a.jsx)(c.Xi,{value:"overview",children:"Tổng quan"}),(0,a.jsx)(c.Xi,{value:"users",children:"Người d\xf9ng"}),(0,a.jsx)(c.Xi,{value:"inventory",children:"Kho m\xe1u"}),(0,a.jsx)(c.Xi,{value:"requests",children:"Y\xeau cầu"}),(0,a.jsx)(c.Xi,{value:"create-users",children:"Tạo t\xe0i khoản"}),(0,a.jsx)(c.Xi,{value:"settings",children:"C\xe0i đặt"})]}),(0,a.jsx)(c.av,{value:"overview",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 mr-2 text-green-600"}),"T\xecnh trạng hệ thống"]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"Hiệu suất hệ thống"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[98.2,"%"]})]}),(0,a.jsx)(o.k,{value:98.2,className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"Người d\xf9ng hoạt động"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["71.6","%"]})]}),(0,a.jsx)(o.k,{value:71.57440125638006,className:"h-2"})]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Hoạt động gần đ\xe2y"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:eJ.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:(0,a.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]})]},e.id))})})]})]})}),(0,a.jsxs)(c.av,{value:"users",className:"space-y-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Tất cả người d\xf9ng"}),(0,a.jsxs)(d.E,{variant:"outline",children:[e_.length," người d\xf9ng"]})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:e_.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-xl shadow-sm bg-white",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-semibold text-base",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(d.E,{variant:"outline",className:"capitalize",children:e.role}),(0,a.jsxs)("span",{children:["Ng\xe0y tạo:"," ",new Date(e.createdAt).toLocaleDateString("vi-VN")]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["SĐT: ",e.phone||"Kh\xf4ng c\xf3"]}),(0,a.jsxs)("p",{children:["Giới t\xednh: ",e.gender||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{children:["Ng\xe0y sinh:"," ",e.date_of_birth?new Date(e.date_of_birth).toLocaleDateString("vi-VN"):"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{children:["Địa chỉ: ",e.address||"Kh\xf4ng c\xf3"]}),(0,a.jsxs)("p",{children:["Trạng th\xe1i:"," ",(0,a.jsx)("span",{className:e.is_active?"text-green-600":"text-red-500",children:e.is_active?"Đang hoạt động":"Bị kh\xf3a"})]}),(0,a.jsxs)("p",{children:["X\xe1c minh:"," ",(0,a.jsx)("span",{className:e.is_verified?"text-green-600":"text-yellow-600",children:e.is_verified?"Đ\xe3 x\xe1c minh":"Chưa x\xe1c minh"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex md:justify-end items-center md:items-start gap-2 mt-4 md:mt-0",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{ek(e),eS(!0)},children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Chỉnh sửa"]}),(0,a.jsxs)(i.$,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",disabled:e.is_verified,onClick:()=>{eB(e._id)},children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Duyệt"]}),(0,a.jsxs)(i.$,{size:"sm",variant:"destructive",onClick:()=>{eZ(e._id)},children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]},e._id))})})]}),(0,a.jsx)(K,{open:eR,onOpenChange:eS,children:(0,a.jsxs)(O,{className:"max-w-md",children:[(0,a.jsxs)(F,{children:[(0,a.jsx)(I,{children:"Chỉnh sửa người d\xf9ng"}),(0,a.jsx)(P,{children:"Cập nhật th\xf4ng tin người d\xf9ng b\xean dưới."})]}),eC&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eS(!1)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Họ t\xean"}),(0,a.jsx)(z.p,{value:eC.full_name,onChange:e=>ek(s=>s?{...s,full_name:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Email"}),(0,a.jsx)(z.p,{type:"email",value:eC.email,onChange:e=>ek(s=>s?{...s,email:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"SĐT"}),(0,a.jsx)(z.p,{value:eC.phone||"",onChange:e=>ek(s=>s?{...s,phone:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Địa chỉ"}),(0,a.jsx)(z.p,{value:eC.address||"",onChange:e=>ek(s=>s?{...s,address:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Giới t\xednh"}),(0,a.jsxs)(V.l6,{value:eC.gender||"other",onValueChange:e=>ek(s=>s?{...s,gender:e}:s),children:[(0,a.jsx)(V.bq,{children:(0,a.jsx)(V.yv,{})}),(0,a.jsxs)(V.gC,{children:[(0,a.jsx)(V.eb,{value:"male",children:"Nam"}),(0,a.jsx)(V.eb,{value:"female",children:"Nữ"}),(0,a.jsx)(V.eb,{value:"other",children:"Kh\xe1c"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Ng\xe0y sinh"}),(0,a.jsx)(z.p,{type:"date",value:eC.date_of_birth?new Date(eC.date_of_birth).toISOString().split("T")[0]:"",onChange:e=>ek(s=>s?{...s,date_of_birth:new Date(e.target.value).toISOString()}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(q.J,{children:"Vai tr\xf2"}),(0,a.jsxs)(V.l6,{value:eC.role,onValueChange:e=>ek(s=>s?{...s,role:e}:s),children:[(0,a.jsx)(V.bq,{children:(0,a.jsx)(V.yv,{})}),(0,a.jsxs)(V.gC,{children:[(0,a.jsx)(V.eb,{value:"admin",children:"Admin"}),(0,a.jsx)(V.eb,{value:"staff",children:"Nh\xe2n vi\xean"}),(0,a.jsx)(V.eb,{value:"donor",children:"Người hiến m\xe1u"}),(0,a.jsx)(V.eb,{value:"recipient",children:"Người nhận m\xe1u"})]})]})]}),(0,a.jsx)(H,{children:(0,a.jsx)(i.$,{type:"submit",onClick:eT,children:"Lưu thay đổi"})})]})]})})]}),(0,a.jsxs)(c.av,{value:"inventory",className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-medium",children:"Lựa chọn Bệnh Viện"})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"relative",ref:er,children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(z.p,{id:"hospital_name",placeholder:"ex: Bệnh viện H\xf9ng Vương",value:M,onChange:eW,onKeyDown:eE,onFocus:()=>{ei(!0),U(!0)},className:"pl-10",required:!0,disabled:!1===W}),J&&en&&eV.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-60 overflow-y-auto shadow-lg rounded",children:eV.map((e,s)=>(0,a.jsxs)("li",{ref:X===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):null,className:"px-4 py-2 hover:bg-gray-100 cursor-pointer ".concat(X===s?"bg-gray-200":""),onClick:()=>eD(e),children:[(0,a.jsx)("strong",{children:e.name}),e.address&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.address})]},s))})]}),(0,a.jsxs)(i.$,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Duyệt"]}),(0,a.jsxs)(i.$,{size:"sm",variant:"destructive",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 mr-1"}),"Từ chối"]})]})]})}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:ed.map(e=>(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-12 h-12 ".concat(e$[ez++].color||"bg-red-500"," rounded-full flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:e.blood_type})}),(0,a.jsx)(d.E,{className:eK(e.quantity),children:e.quantity<30?"Rất thấp":e.quantity<100?"Thấp":e.quantity<150?"Trung b\xecnh":"Tốt"})]})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:e.quantity}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"/ 500"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:["Đ\xe3 hết hạn: ",e.expiring_quantity]})]}),(0,a.jsx)(o.k,{value:Math.min(e.quantity/500*100,100),className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Hiện c\xf3"}),(0,a.jsx)("span",{children:"Mục ti\xeau"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",className:"flex-1",onClick:eU,children:[(0,a.jsx)(C.A,{className:"w-3 h-3 mr-1"}),"Sửa"]}),(0,a.jsxs)(i.$,{size:"sm",className:"flex-1",onClick:eU,children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),"Th\xeam"]})]})]})]},e.blood_type))})]}),(0,a.jsx)(c.av,{value:"requests",className:"space-y-6",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Quản l\xfd y\xeau cầu m\xe1u"}),(0,a.jsx)(n.BT,{children:"Tất cả y\xeau cầu m\xe1u trong hệ thống"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-4"}),(0,a.jsx)("p",{children:"Chức năng quản l\xfd y\xeau cầu đang được ph\xe1t triển"})]})})]})}),(0,a.jsx)(c.av,{value:"create-users",className:"space-y-6",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Tạo t\xe0i khoản mới"}),(0,a.jsx)(n.BT,{children:"Chọn loại người d\xf9ng v\xe0 điền th\xf4ng tin b\xean dưới"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(V.l6,{onValueChange:e=>ef(e),defaultValue:"staff",children:[(0,a.jsx)(V.bq,{children:(0,a.jsx)(V.yv,{placeholder:"Chọn loại t\xe0i khoản"})}),(0,a.jsxs)(V.gC,{children:[(0,a.jsx)(V.eb,{value:"staff",children:"Nh\xe2n vi\xean"}),(0,a.jsx)(V.eb,{value:"donor",children:"Người hiến m\xe1u"}),(0,a.jsx)(V.eb,{value:"recipient",children:"Người nhận m\xe1u"})]})]}),(0,a.jsx)(z.p,{placeholder:"Họ t\xean",value:eg,onChange:e=>ep(e.target.value)}),(0,a.jsx)(z.p,{placeholder:"Email",value:ej,onChange:e=>ev(e.target.value)}),(0,a.jsx)(z.p,{placeholder:"Mật khẩu",type:"password",value:ey,onChange:e=>eN(e.target.value)}),(0,a.jsxs)("div",{className:"relative",ref:er,children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(z.p,{id:"hospital_name",placeholder:"ex: Bệnh viện H\xf9ng Vương",value:M,onChange:eW,onKeyDown:eE,onFocus:()=>{ei(!0),U(!0)},className:"pl-10",required:!0,disabled:!1===W}),J&&en&&eV.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-60 overflow-y-auto shadow-lg rounded",children:eV.map((e,s)=>(0,a.jsxs)("li",{ref:X===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):null,className:"px-4 py-2 hover:bg-gray-100 cursor-pointer ".concat(X===s?"bg-gray-200":""),onClick:()=>eD(e),children:[(0,a.jsx)("strong",{children:e.name}),e.address&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.address})]},s))})]})]}),(0,a.jsx)(i.$,{onClick:eq,children:"Tạo t\xe0i khoản"})]})]})}),(0,a.jsx)(c.av,{value:"settings",className:"space-y-6",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"C\xe0i đặt hệ thống"]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"C\xe0i đặt chung"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Tự động duyệt người d\xf9ng"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Tự động duyệt đăng k\xfd người hiến m\xe1u mới"})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",children:"Bật"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Th\xf4ng b\xe1o khẩn cấp"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Gửi th\xf4ng b\xe1o khi c\xf3 y\xeau cầu khẩn cấp"})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",children:"Cấu h\xecnh"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Sao lưu dữ liệu"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Tự động sao lưu dữ liệu h\xe0ng ng\xe0y"})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",children:"C\xe0i đặt"})]})]})]})})})]})})]})]}),(0,a.jsx)(E.l$,{position:"top-center",containerStyle:{top:80}}),(0,a.jsx)(Z.Footer,{})]})})}P.displayName=W.VY.displayName},2714:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(5155),l=t(2115),r=t(968),n=t(2085),i=t(3999);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.b,{ref:s,className:(0,i.cn)(d(),t),...l})});c.displayName=r.b.displayName},3403:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=t(3464).A.create({baseURL:"/api"})},4964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var a=t(5155),l=t(2115),r=t(704),n=t(3999);let i=r.bL,d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});d.displayName=r.B8.displayName;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});c.displayName=r.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});o.displayName=r.UC.displayName},5784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>g,gC:()=>f,l6:()=>o,yv:()=>u});var a=t(5155),l=t(2115),r=t(8715),n=t(6474),i=t(7863),d=t(5196),c=t(3999);let o=r.bL;r.YJ;let u=r.WT,m=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(r.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let f=l.forwardRef((e,s)=>{let{className:t,children:l,position:n="popper",...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(h,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=r.JU.displayName;let g=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(r.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(r.p4,{children:l})]})});g.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=r.wv.displayName},6922:(e,s,t)=>{Promise.resolve().then(t.bind(t,2288))},8074:(e,s,t)=>{"use strict";t.d(s,{O:()=>c});var a=t(5155),l=t(2115),r=t(5695),n=t(9894),i=t(8482),d=t(1976);function c(e){let{children:s,requiredRole:t,redirectTo:c="/login"}=e,[o,u]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0),h=(0,r.useRouter)();return((0,l.useEffect)(()=>{let e=(0,n.HW)();if(!e){h.push(c);return}if(t&&("user"===t&&"admin"===e.role||"user"!==t&&e.role!==t)){"admin"===e.role?h.push("/admin/dashboard"):"staff"===e.role?h.push("/staff/dashboard"):h.push("/user/dashboard");return}u(e),x(!1)},[h,t,c]),m)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Đang kiểm tra quyền truy cập..."})]})})}):o?(0,a.jsx)(a.Fragment,{children:s}):null}},8145:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(5155);t(2115);var l=t(2085),r=t(3999);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)(n({variant:t}),s),...l})}},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i});var a=t(5155),l=t(2115),r=t(3999);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(5155),l=t(2115),r=t(3999);let n=l.forwardRef((e,s)=>{let{className:t,type:l,...n}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[6237,3464,3568,461,7016,1975,8441,1684,7358],()=>s(6922)),_N_E=e.O()}]);