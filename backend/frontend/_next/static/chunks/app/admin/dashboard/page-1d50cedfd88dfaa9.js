(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{1397:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var a=t(5155),l=t(2115),n=t(5863),r=t(3999);let i=l.forwardRef((e,s)=>{let{className:t,value:l,...i}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});i.displayName=n.bL.displayName},2288:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(5155),l=t(8074),n=t(5695),r=t(8482),i=t(7168),d=t(8145),c=t(4964),o=t(1397),m=t(7580),h=t(5670),u=t(9446),x=t(3717),g=t(8691),f=t(381),p=t(5525),j=t(4835),y=t(7340),v=t(1243),N=t(9397),b=t(9917),w=t(2525),_=t(4516),A=t(4616),k=t(6874),C=t.n(k),S=t(6766),R=t(395),D=t(7746),T=t(2714),L=t(9852),E=t(3403),q=t(2115),z=t(5784),V=t(3568),B=t(5452),Z=t(4416),X=t(3999);let H=B.bL;B.l9;let J=B.ZL;B.bm;let O=q.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(B.hJ,{ref:s,className:(0,X.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});O.displayName=B.hJ.displayName;let U=q.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(J,{children:[(0,a.jsx)(O,{}),(0,a.jsxs)(B.UC,{ref:s,className:(0,X.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[l,(0,a.jsxs)(B.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});U.displayName=B.UC.displayName;let W=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,X.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};W.displayName="DialogHeader";let I=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,X.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};I.displayName="DialogFooter";let K=q.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(B.hE,{ref:s,className:(0,X.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});K.displayName=B.hE.displayName;let $=q.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(B.VY,{ref:s,className:(0,X.cn)("text-sm text-muted-foreground",t),...l})});function F(){let{user:e,logout:s,setUser:t}=(0,R.A)(),k=(0,n.useRouter)(),[B,Z]=(0,q.useState)(null),[X,J]=(0,q.useState)(!0),[O,F]=(0,q.useState)(-1),[M,P]=(0,q.useState)(""),[Q,Y]=(0,q.useState)(""),[G,ee]=(0,q.useState)(""),[es,et]=(0,q.useState)([]),ea=(0,q.useRef)(null),[el,en]=(0,q.useState)(!1),[er,ei]=(0,q.useState)([]),[ed,ec]=(0,q.useState)(0),[eo,em]=(0,q.useState)(0),[eh,eu]=(0,q.useState)("staff"),[ex,eg]=(0,q.useState)(""),[ef,ep]=(0,q.useState)(""),[ej,ey]=(0,q.useState)(""),[ev,eN]=(0,q.useState)(""),[eb,ew]=(0,q.useState)([]),[e_,eA]=(0,q.useState)(null),[ek,eC]=(0,q.useState)(!1),[eS,eR]=(0,q.useState)(!1),[eD,eT]=(0,q.useState)(null),[eL,eE]=(0,q.useState)(null),[eq,ez]=(0,q.useState)([]);(0,q.useEffect)(()=>{async function s(){try{if(!e||!e._id){console.log("User not loaded yet or missing _id:",e);return}let s=await E.A.get("/users/admin/get-all/".concat(e._id));ew(s.data.users)}catch(e){console.error("Lỗi khi lấy danh s\xe1ch người d\xf9ng:",e)}}e&&s()},[e]);let eV=async e=>{try{let s=(await E.A.put("/users/verify/".concat(e))).data;ew(t=>t.map(t=>t._id===e?{...t,is_verified:s.is_verified}:t));let t=eb.find(s=>s._id===e);t&&eF("user_verified","".concat(t.full_name," (").concat(t.role,") đ\xe3 được x\xe1c minh bởi quản trị vi\xean"),t.full_name,t.role),V.Ay.success("Duyệt th\xe0nh c\xf4ng")}catch(e){V.Ay.error("Kh\xf4ng thể duyệt user"),console.error(e)}},eB=async s=>{console.log(e_);try{let s=eb.find(e=>e._id===(null==e_?void 0:e_._id)),a=(await E.A.put("/users/edit/".concat(null==e_?void 0:e_._id),{full_name:null==e_?void 0:e_.full_name,email:null==e_?void 0:e_.email,phone:null==e_?void 0:e_.phone,gender:null==e_?void 0:e_.gender,date_of_birth:null==e_?void 0:e_.date_of_birth,address:null==e_?void 0:e_.address,role:null==e_?void 0:e_.role})).data.user;if(ew(e=>e.map(e=>e._id===a._id?a:e)),t({...e,full_name:(null==e_?void 0:e_.full_name)||e.full_name}),e_){let e=[];(null==s?void 0:s.full_name)!==e_.full_name&&e.push("t\xean"),(null==s?void 0:s.email)!==e_.email&&e.push("email"),(null==s?void 0:s.role)!==e_.role&&e.push("vai tr\xf2"),(null==s?void 0:s.phone)!==e_.phone&&e.push("số điện thoại");let t=e.length>0?" (".concat(e.join(", "),")"):"";eF("user_edited","Th\xf4ng tin ".concat(e_.full_name," đ\xe3 được cập nhật").concat(t),e_.full_name,e_.role)}eC(!1),V.Ay.success("Chỉnh sửa th\xf4ng tin t\xe0i khoản th\xe0nh c\xf4ng")}catch(e){V.Ay.error("Kh\xf4ng thể chỉnh sửa user"),console.error(e)}},eZ=async s=>{try{let t=eb.find(e=>e._id===s);await E.A.delete("/users/admin/users/delete/".concat(null==e?void 0:e._id,"/").concat(s)),ew(e=>e.filter(e=>e._id!==s)),t&&eF("user_deleted","T\xe0i khoản ".concat(t.full_name," (").concat(t.role,") đ\xe3 bị x\xf3a"),t.full_name,t.role),V.Ay.success("X\xf3a t\xe0i khoản th\xe0nh c\xf4ng")}catch(e){V.Ay.error("Kh\xf4ng thể x\xf3a user"),console.error(e)}},eX=async()=>{eL&&eD&&("delete"===eD?await eZ(eL):"verify"===eD&&await eV(eL),eR(!1),eT(null),eE(null))},eH=(e,s)=>{eT(e),eE(s),eR(!0)},eJ=async()=>{try{let s=await E.A.post("/users/register",{full_name:ex,email:ef,password:ej,role:eh,phone:"0",gender:"other",date_of_birth:"",address:""});if(await E.A.put("/users/verify/".concat(s.data.user.id)),await E.A.post("/users/staff-profiles",{user_id:s.data.user.id,department:"0",assigned_area:"0",shift_time:"0",hospital:G}),eF("user_created","T\xe0i khoản ".concat(eh,' mới "').concat(ex,'" đ\xe3 được tạo v\xe0 x\xe1c minh'),ex,eh),e&&e._id){let s=await E.A.get("/users/admin/get-all/".concat(e._id));ew(s.data.users)}V.Ay.success("Tạo t\xe0i khoản th\xe0nh c\xf4ng!"),eg(""),ep(""),ey(""),eN("")}catch(e){V.Ay.error("Lỗi khi tạo t\xe0i khoản."),console.error(e)}};(0,q.useEffect)(()=>{function e(e){ea.current&&!ea.current.contains(e.target)&&(en(!1),J(!1))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,q.useEffect)(()=>{(async function(){try{let e=(await E.A.get("/hospital/")).data.hospitals.map(e=>({_id:e._id,name:e.name,address:e.address,phone:e.phone}));et(e);let s=await E.A.get("/blood-in/blood-inventory/getAll");ec(s.data.inventories.reduce((e,s)=>e+s.quantity,0)),em(s.data.inventories.reduce((e,s)=>e+s.expiring_quantity,0))}catch(e){console.error("Lỗi khi lấy danh s\xe1ch bệnh viện:",e)}})()},[]);let eO=async e=>{ee(e._id),P(e.name),Y(e.name),J(!1),F(-1);try{let s=await E.A.get("/blood-in/blood-inventory/hospital/".concat(e._id));ei(s.data.inventories),eF("blood_updated","Đ\xe3 chọn bệnh viện ".concat(e.name," - ").concat(s.data.inventories.length," loại m\xe1u c\xf3 sẵn"))}catch(s){ei([]),eF("system","Kh\xf4ng thể tải th\xf4ng tin kho m\xe1u cho ".concat(e.name))}},eU=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D"),eW=""===Q.trim()?es:es.filter(e=>eU(e.name.toLowerCase()).includes(eU(Q.toLowerCase()))),eI=e=>{if(X){if("ArrowDown"===e.key){let s=(O+1)%eW.length;F(s),P(eW[s].name),e.preventDefault()}else if("ArrowUp"===e.key){let s=(O-1+eW.length)%eW.length;F(s),P(eW[s].name),e.preventDefault()}else"Enter"===e.key&&O>=0&&(eO(eW[O]),e.preventDefault())}},eK=e=>{Y(e.target.value),P(e.target.value),J(!0),F(-1)},e$=["bg-red-500","bg-red-400","bg-blue-500","bg-blue-400","bg-green-500","bg-green-400","bg-purple-500","bg-purple-400"],eF=(e,s,t,a)=>{let l={user_created:m.A,user_verified:h.A,user_deleted:u.A,user_edited:x.A,blood_updated:g.A,system:f.A,login:p.A,logout:j.A},n={id:Date.now().toString()+Math.random(),type:e,message:s,user_name:t,user_role:a,timestamp:new Date().toISOString(),icon:l[e],color:{user_created:"text-blue-600",user_verified:"text-green-600",user_deleted:"text-red-600",user_edited:"text-orange-600",blood_updated:"text-red-500",system:"text-gray-600",login:"text-purple-600",logout:"text-yellow-600"}[e]};ez(e=>[n,...e.slice(0,9)])};(0,q.useEffect)(()=>{if(eb.length>0){let s=[];s.push({id:"system-start",type:"system",message:"Hệ thống khởi động th\xe0nh c\xf4ng",timestamp:new Date().toISOString(),icon:f.A,color:"text-gray-600"}),(null==e?void 0:e.full_name)&&s.push({id:"admin-login",type:"login",message:"Quản trị vi\xean ".concat(e.full_name," đăng nhập hệ thống"),user_name:e.full_name,user_role:"admin",timestamp:new Date().toISOString(),icon:p.A,color:"text-purple-600"}),eb.slice(0,5).forEach((e,t)=>{e.is_verified?s.push({id:"verify-".concat(e._id),type:"user_verified",message:"".concat(e.full_name," (").concat(e.role,") đ\xe3 được x\xe1c minh"),user_name:e.full_name,user_role:e.role,timestamp:new Date(Date.now()-36e5*t).toISOString(),icon:h.A,color:"text-green-600"}):s.push({id:"create-".concat(e._id),type:"user_created",message:"".concat(e.full_name," đăng k\xfd t\xe0i khoản ").concat(e.role),user_name:e.full_name,user_role:e.role,timestamp:e.createdAt,icon:m.A,color:"text-blue-600"})}),ed>0&&s.push({id:"blood-update",type:"blood_updated",message:"Cập nhật kho m\xe1u - Tổng ".concat(ed," ml, ").concat(eo," sắp hết hạn"),timestamp:new Date(Date.now()-18e5).toISOString(),icon:g.A,color:"text-red-500"}),ez(s.slice(0,10))}},[eb,ed,eo,e]);let eM=e=>e<30?"bg-red-100 text-red-800 border-red-200":e<100?"bg-orange-100 text-orange-800 border-orange-200":e<150?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200",eP=()=>{k.push("/admin/blood-inventory?hospitalId=".concat(G))};return(0,a.jsx)(l.O,{requiredRole:"admin",children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white border-b sticky top-0 z-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(C(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:(0,a.jsx)(S.default,{src:"/images/logo.webp",alt:"ScαrletBlood Logo",width:40,height:40,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ScαrletBlood Admin"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Bảng điều khiển quản trị"})]})]}),(0,a.jsxs)(d.E,{className:"bg-red-100 text-red-800",children:[(0,a.jsx)(p.A,{className:"w-3 h-3 mr-1"}),"Quản trị vi\xean"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Xin ch\xe0o, ",(0,a.jsx)("strong",{children:null==e?void 0:e.full_name})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(C(),{href:"/",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Về trang chủ"]})}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{s()},children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Đăng xuất"]})]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 flex-grow",children:(0,a.jsxs)(c.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(c.Xi,{value:"overview",children:"Tổng quan"}),(0,a.jsx)(c.Xi,{value:"users",children:"Người d\xf9ng"}),(0,a.jsx)(c.Xi,{value:"inventory",children:"Kho m\xe1u"}),(0,a.jsx)(c.Xi,{value:"create-users",children:"Tạo t\xe0i khoản"})]}),(0,a.jsxs)(c.av,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-blue-500",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tổng người d\xf9ng"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eb.length})]}),(0,a.jsx)(m.A,{className:"w-8 h-8 text-blue-500"})]})})}),(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-green-500",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Đ\xe3 x\xe1c minh"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eb.filter(e=>e.is_verified).length})]}),(0,a.jsx)(h.A,{className:"w-8 h-8 text-green-500"})]})})}),(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-red-500",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tổng kho m\xe1u"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:ed.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"ml"})]}),(0,a.jsx)(g.A,{className:"w-8 h-8 text-red-500"})]})})}),(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-orange-500",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Sắp hết hạn"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eo.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"ml"})]}),(0,a.jsx)(v.A,{className:"w-8 h-8 text-orange-500"})]})})})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 mr-2 text-green-600"}),"Thống k\xea hệ thống"]})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Tổng người d\xf9ng"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:eb.length})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(eb.length/5e3*100,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Người d\xf9ng đ\xe3 x\xe1c minh"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[eb.filter(e=>e.is_verified).length," / ",eb.length]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(eb.length>0?eb.filter(e=>e.is_verified).length/eb.length*100:0,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Tổng kho m\xe1u"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:[ed.toLocaleString()," ml"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(ed/4e5*100,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"M\xe1u sắp hết hạn"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-orange-600",children:[eo.toLocaleString()," ml"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-orange-400 h-2 rounded-full transition-all duration-300",style:{width:"".concat(ed>0?eo/ed*100:0,"%")}})})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Thống k\xea theo vai tr\xf2"}),["donor","recipient","staff","admin"].map(e=>{let s=eb.filter(s=>s.role===e).length,t=eb.length>0?s/eb.length*100:0;return(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600 capitalize",children:"donor"===e?"Người hiến m\xe1u":"recipient"===e?"Người nhận m\xe1u":"staff"===e?"Nh\xe2n vi\xean":"Quản trị vi\xean"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-900",children:s})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-300 ".concat("donor"===e?"bg-red-400":"recipient"===e?"bg-blue-400":"staff"===e?"bg-green-400":"bg-purple-400"),style:{width:"".concat(t,"%")}})})]},e)})]})]})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Hoạt động gần đ\xe2y"}),(0,a.jsxs)(d.E,{variant:"outline",children:[eq.length," hoạt động"]})]})}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:eq.length>0?eq.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900 font-medium",children:e.message}),e.user_name&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Người d\xf9ng: ",e.user_name,e.user_role&&(0,a.jsxs)("span",{className:"ml-1 text-gray-500",children:["(",e.user_role,")"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.E,{variant:"outline",className:"text-xs ".concat("user_verified"===e.type?"border-green-200 text-green-700":"user_created"===e.type?"border-blue-200 text-blue-700":"user_deleted"===e.type?"border-red-200 text-red-700":"user_edited"===e.type?"border-orange-200 text-orange-700":"blood_updated"===e.type?"border-red-200 text-red-700":"login"===e.type?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"),children:"user_verified"===e.type?"X\xe1c minh":"user_created"===e.type?"Tạo mới":"user_deleted"===e.type?"X\xf3a":"user_edited"===e.type?"Chỉnh sửa":"blood_updated"===e.type?"Cập nhật m\xe1u":"login"===e.type?"Đăng nhập":"logout"===e.type?"Đăng xuất":"Hệ thống"})})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(N.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Chưa c\xf3 hoạt động n\xe0o"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"C\xe1c hoạt động sẽ hiển thị tại đ\xe2y"})]})}),eq.length>0&&(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Hiển thị ",Math.min(eq.length,10)," hoạt động gần nhất"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"X\xe1c minh"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-1"}),"Tạo mới"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),"X\xf3a/Cập nhật"]})]})]})})]})]})]})]}),(0,a.jsxs)(c.av,{value:"users",className:"space-y-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Tất cả người d\xf9ng"}),(0,a.jsxs)(d.E,{variant:"outline",children:[eb.length," người d\xf9ng"]})]})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:eb.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-xl shadow-sm bg-white",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-semibold text-base",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(d.E,{variant:"outline",className:"capitalize",children:e.role}),(0,a.jsxs)("span",{children:["Ng\xe0y tạo:"," ",new Date(e.createdAt).toLocaleDateString("vi-VN")]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["SĐT: ",e.phone||"Kh\xf4ng c\xf3"]}),(0,a.jsxs)("p",{children:["Giới t\xednh: ",e.gender||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{children:["Ng\xe0y sinh:"," ",e.date_of_birth?new Date(e.date_of_birth).toLocaleDateString("vi-VN"):"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{children:["Địa chỉ: ",e.address||"Kh\xf4ng c\xf3"]}),(0,a.jsxs)("p",{children:["Trạng th\xe1i:"," ",(0,a.jsx)("span",{className:e.is_active?"text-green-600":"text-red-500",children:e.is_active?"Đang hoạt động":"Bị kh\xf3a"})]}),(0,a.jsxs)("p",{children:["X\xe1c minh:"," ",(0,a.jsx)("span",{className:e.is_verified?"text-green-600":"text-yellow-600",children:e.is_verified?"Đ\xe3 x\xe1c minh":"Chưa x\xe1c minh"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex md:justify-end items-center md:items-start gap-2 mt-4 md:mt-0",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{eA(e),eC(!0)},children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Chỉnh sửa"]}),(0,a.jsxs)(i.$,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",disabled:e.is_verified,onClick:()=>{eH("verify",e._id)},children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"Duyệt"]}),(0,a.jsxs)(i.$,{size:"sm",variant:"destructive",onClick:()=>{eH("delete",e._id)},children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]},e._id))})})]}),(0,a.jsx)(H,{open:ek,onOpenChange:eC,children:(0,a.jsxs)(U,{className:"max-w-md",children:[(0,a.jsxs)(W,{children:[(0,a.jsx)(K,{children:"Chỉnh sửa người d\xf9ng"}),(0,a.jsx)($,{children:"Cập nhật th\xf4ng tin người d\xf9ng b\xean dưới."})]}),e_&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eC(!1)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Họ t\xean"}),(0,a.jsx)(L.p,{value:e_.full_name,onChange:e=>eA(s=>s?{...s,full_name:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Email"}),(0,a.jsx)(L.p,{type:"email",value:e_.email,onChange:e=>eA(s=>s?{...s,email:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"SĐT"}),(0,a.jsx)(L.p,{value:e_.phone||"",onChange:e=>eA(s=>s?{...s,phone:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Địa chỉ"}),(0,a.jsx)(L.p,{value:e_.address||"",onChange:e=>eA(s=>s?{...s,address:e.target.value}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Giới t\xednh"}),(0,a.jsxs)(z.l6,{value:e_.gender||"other",onValueChange:e=>eA(s=>s?{...s,gender:e}:s),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"male",children:"Nam"}),(0,a.jsx)(z.eb,{value:"female",children:"Nữ"}),(0,a.jsx)(z.eb,{value:"other",children:"Kh\xe1c"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Ng\xe0y sinh"}),(0,a.jsx)(L.p,{type:"date",value:e_.date_of_birth?new Date(e_.date_of_birth).toISOString().split("T")[0]:"",onChange:e=>eA(s=>s?{...s,date_of_birth:new Date(e.target.value).toISOString()}:s)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(T.J,{children:"Vai tr\xf2"}),(0,a.jsxs)(z.l6,{value:e_.role,onValueChange:e=>eA(s=>s?{...s,role:e}:s),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"admin",children:"Admin"}),(0,a.jsx)(z.eb,{value:"staff",children:"Nh\xe2n vi\xean"}),(0,a.jsx)(z.eb,{value:"donor",children:"Người hiến m\xe1u"}),(0,a.jsx)(z.eb,{value:"recipient",children:"Người nhận m\xe1u"})]})]})]}),(0,a.jsx)(I,{children:(0,a.jsx)(i.$,{type:"submit",onClick:eB,children:"Lưu thay đổi"})})]})]})}),(0,a.jsx)(H,{open:eS,onOpenChange:eR,children:(0,a.jsxs)(U,{className:"max-w-md",children:[(0,a.jsxs)(W,{children:[(0,a.jsx)(K,{children:"delete"===eD?"X\xe1c nhận x\xf3a người d\xf9ng":"X\xe1c nhận duyệt người d\xf9ng"}),(0,a.jsx)($,{children:"delete"===eD?"Bạn c\xf3 chắc chắn muốn x\xf3a người d\xf9ng n\xe0y? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.":"Bạn c\xf3 chắc chắn muốn duyệt người d\xf9ng n\xe0y?"})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>eR(!1),children:"Hủy"}),(0,a.jsx)(i.$,{variant:"delete"===eD?"destructive":"default",onClick:eX,children:"delete"===eD?"X\xf3a":"Duyệt"})]})]})})]}),(0,a.jsxs)(c.av,{value:"inventory",className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-medium",children:"Lựa chọn Bệnh Viện"})})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)("div",{className:"relative",ref:ea,children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(L.p,{id:"hospital_name",placeholder:"ex: Bệnh viện H\xf9ng Vương",value:M,onChange:eK,onKeyDown:eI,onFocus:()=>{en(!0),J(!0)},className:"pl-10",required:!0,disabled:!1===B}),X&&el&&eW.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-60 overflow-y-auto shadow-lg rounded",children:eW.map((e,s)=>(0,a.jsxs)("li",{ref:O===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):null,className:"px-4 py-2 hover:bg-gray-100 cursor-pointer ".concat(O===s?"bg-gray-200":""),onClick:()=>eO(e),children:[(0,a.jsx)("strong",{children:e.name}),e.address&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.address})]},s))})]})})]})}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:er.map((e,s)=>(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-12 h-12 ".concat(e$[s%e$.length]," rounded-full flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:e.blood_type})}),(0,a.jsx)(d.E,{className:eM(e.quantity),children:e.quantity<30?"Rất thấp":e.quantity<100?"Thấp":e.quantity<150?"Trung b\xecnh":"Tốt"})]})}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:e.quantity}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"/ 50000"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:["sắp hết hạn: ",e.expiring_quantity]})]}),(0,a.jsx)(o.k,{value:Math.min(e.quantity/5e4*100,100),className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Hiện c\xf3"}),(0,a.jsx)("span",{children:"Mục ti\xeau"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",className:"flex-1",onClick:eP,children:[(0,a.jsx)(x.A,{className:"w-3 h-3 mr-1"}),"Sửa"]}),(0,a.jsxs)(i.$,{size:"sm",className:"flex-1",onClick:eP,children:[(0,a.jsx)(A.A,{className:"w-3 h-3 mr-1"}),"Th\xeam"]})]})]})]},e.blood_type))})]}),(0,a.jsx)(c.av,{value:"create-users",className:"space-y-6",children:(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Tạo t\xe0i khoản mới"}),(0,a.jsx)(r.BT,{children:"Chọn loại người d\xf9ng v\xe0 điền th\xf4ng tin b\xean dưới"})]}),(0,a.jsxs)(r.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(z.l6,{onValueChange:e=>eu(e),defaultValue:"staff",children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{placeholder:"Chọn loại t\xe0i khoản"})}),(0,a.jsx)(z.gC,{children:(0,a.jsx)(z.eb,{value:"staff",children:"Nh\xe2n vi\xean"})})]}),(0,a.jsx)(L.p,{placeholder:"Họ t\xean",value:ex,onChange:e=>eg(e.target.value)}),(0,a.jsx)(L.p,{placeholder:"Email",value:ef,onChange:e=>ep(e.target.value)}),(0,a.jsx)(L.p,{placeholder:"Mật khẩu",type:"password",value:ej,onChange:e=>ey(e.target.value)}),(0,a.jsxs)("div",{className:"relative",ref:ea,children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(L.p,{id:"hospital_name",placeholder:"ex: Bệnh viện H\xf9ng Vương",value:M,onChange:eK,onKeyDown:eI,onFocus:()=>{en(!0),J(!0)},className:"pl-10",required:!0,disabled:!1===B}),X&&el&&eW.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-60 overflow-y-auto shadow-lg rounded",children:eW.map((e,s)=>(0,a.jsxs)("li",{ref:O===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):null,className:"px-4 py-2 hover:bg-gray-100 cursor-pointer ".concat(O===s?"bg-gray-200":""),onClick:()=>eO(e),children:[(0,a.jsx)("strong",{children:e.name}),e.address&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.address})]},s))})]})]}),(0,a.jsx)(i.$,{onClick:eJ,children:"Tạo t\xe0i khoản"})]})]})})]})}),(0,a.jsx)(V.l$,{position:"top-center",containerStyle:{top:80}}),(0,a.jsx)(D.Footer,{})]})})}$.displayName=B.VY.displayName},2714:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(5155),l=t(2115),n=t(968),r=t(2085),i=t(3999);let d=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.b,{ref:s,className:(0,i.cn)(d(),t),...l})});c.displayName=n.b.displayName},3403:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=t(3464).A.create({baseURL:"/api"})},4964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var a=t(5155),l=t(2115),n=t(704),r=t(3999);let i=n.bL,d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.B8,{ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});d.displayName=n.B8.displayName;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.l9,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});c.displayName=n.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.UC,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});o.displayName=n.UC.displayName},5784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>h,eb:()=>f,gC:()=>g,l6:()=>o,yv:()=>m});var a=t(5155),l=t(2115),n=t(8715),r=t(6474),i=t(7863),d=t(5196),c=t(3999);let o=n.bL;n.YJ;let m=n.WT,h=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(n.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[l,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=n.l9.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=n.PP.displayName;let x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(r.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let g=l.forwardRef((e,s)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(x,{})]})})});g.displayName=n.UC.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=n.JU.displayName;let f=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(n.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:l})]})});f.displayName=n.q7.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=n.wv.displayName},8074:(e,s,t)=>{"use strict";t.d(s,{O:()=>c});var a=t(5155),l=t(2115),n=t(5695),r=t(9894),i=t(8482),d=t(1976);function c(e){let{children:s,requiredRole:t,redirectTo:c="/login"}=e,[o,m]=(0,l.useState)(null),[h,u]=(0,l.useState)(!0),x=(0,n.useRouter)();return((0,l.useEffect)(()=>{let e=(0,r.HW)();if(!e){x.push(c);return}if(t&&("user"===t&&"admin"===e.role||"user"!==t&&e.role!==t)){"admin"===e.role?x.push("/admin/dashboard"):"staff"===e.role?x.push("/staff/dashboard"):x.push("/user/dashboard");return}m(e),u(!1)},[x,t,c]),h)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Đang kiểm tra quyền truy cập..."})]})})}):o?(0,a.jsx)(a.Fragment,{children:s}):null}},8145:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(5155);t(2115);var l=t(2085),n=t(3999);let r=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)(r({variant:t}),s),...l})}},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>r,aR:()=>i});var a=t(5155),l=t(2115),n=t(3999);let r=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});r.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},8987:(e,s,t)=>{Promise.resolve().then(t.bind(t,2288))},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(5155),l=t(2115),n=t(3999);let r=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});r.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[6237,3464,3568,461,8936,1975,8441,1684,7358],()=>s(8987)),_N_E=e.O()}]);