(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5596],{1397:(e,s,a)=>{"use strict";a.d(s,{k:()=>i});var t=a(5155),r=a(2115),d=a(5863),l=a(3999);let i=r.forwardRef((e,s)=>{let{className:a,value:r,...i}=e;return(0,t.jsx)(d.bL,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...i,children:(0,t.jsx)(d.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=d.bL.displayName},2714:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var t=a(5155),r=a(2115),d=a(968),l=a(2085),i=a(3999);let n=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.b,{ref:s,className:(0,i.cn)(n(),a),...r})});o.displayName=d.b.displayName},3403:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=a(3464).A.create({baseURL:"/api"})},6378:(e,s,a)=>{Promise.resolve().then(a.bind(a,8495))},8482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>l,aR:()=>i});var t=a(5155),r=a(2115),d=a(3999);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});n.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},8495:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5155),r=a(9137),d=a.n(r),l=a(2115),i=a(5695),n=a(8482),o=a(2714),c=a(9852),m=a(7168),u=a(1397),x=a(3403),f=a(446),b=a(7949),h=a(7746),p=a(3568);function g(){let e=(0,i.useRouter)(),s=(0,i.useSearchParams)().get("hospitalId"),[a,r]=(0,l.useState)([]),[g,y]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=async()=>{try{let e=await x.A.get("/blood-in/blood-inventory/hospital/".concat(s));r(e.data.inventories),console.log(e.data.inventories)}catch(e){r([])}finally{y(!1)}};s&&e()},[s]);let j=(e,s,t)=>{let d=[...a];d[e][s]=t,r(d)},N=async()=>{try{await Promise.all(a.map(e=>x.A.put("/blood-in/blood-inventory/update/".concat(e._id),{quantity:e.quantity,expiring_quantity:e.expiring_quantity}))),p.Ay.success("Cập nhật kho m\xe1u th\xe0nh c\xf4ng."),e.push("/admin/dashboard")}catch(e){p.Ay.error("Kh\xf4ng thể lưu thay đổi.")}},v=e=>e<30?"bg-red-500":e<100?"bg-yellow-500":e<150?"bg-blue-500":"bg-green-500";return g?(0,t.jsx)("p",{className:"p-4",children:"Đang tải dữ liệu..."}):(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106 min-h-screen bg-white",children:[(0,t.jsx)(b.Header,{}),(0,t.jsx)("div",{className:"jsx-92ddb3b78ad75106 flex justify-center bg-gray-50 min-h-screen py-10",children:(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106 w-full max-w-6xl px-4",children:[(0,t.jsx)("h1",{className:"jsx-92ddb3b78ad75106 text-3xl font-bold mb-8 text-center text-red-700",children:"Quản l\xfd kho m\xe1u"}),(0,t.jsx)("div",{className:"jsx-92ddb3b78ad75106 grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((e,s)=>(0,t.jsxs)(n.Zp,{className:"shadow-lg rounded-2xl border border-gray-200 bg-white",children:[(0,t.jsxs)(n.aR,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106 flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"jsx-92ddb3b78ad75106 "+"p-2 rounded-full ".concat(v(e.quantity)," text-white"),children:(0,t.jsx)(f.A,{className:"w-5 h-5"})}),(0,t.jsx)(n.ZB,{className:"text-lg font-semibold",children:e.blood_type})]}),(0,t.jsxs)("span",{className:"jsx-92ddb3b78ad75106 text-sm text-gray-500",children:["Đang c\xf3: ",(0,t.jsx)("strong",{className:"jsx-92ddb3b78ad75106",children:e.quantity})," ml"]})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106",children:[(0,t.jsx)(o.J,{children:"Số lượng hiện c\xf3"}),(0,t.jsx)(c.p,{type:"number",min:0,value:e.quantity,onChange:e=>j(s,"quantity",parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106",children:[(0,t.jsx)(o.J,{children:"Sắp hết hạn"}),(0,t.jsx)(c.p,{type:"number",min:0,value:e.expiring_quantity,onChange:e=>j(s,"expiring_quantity",parseInt(e.target.value))})]})]}),(0,t.jsxs)("div",{className:"jsx-92ddb3b78ad75106",children:[(0,t.jsx)(o.J,{children:"Tiến độ đạt mục ti\xeau (50000 ml)"}),(0,t.jsx)(u.k,{value:Math.min(e.quantity/5e4*100,100),className:"h-2 mt-1"})]})]})]},e._id))}),(0,t.jsx)("div",{className:"jsx-92ddb3b78ad75106 flex justify-end mt-6",children:(0,t.jsx)(m.$,{onClick:N,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-xl shadow-md",children:"\uD83D\uDCBE Lưu thay đổi"})})]})}),(0,t.jsx)(h.Footer,{}),(0,t.jsx)(d(),{id:"92ddb3b78ad75106",children:"@-webkit-keyframes progress{from{width:0%}to{width:100%}}@-moz-keyframes progress{from{width:0%}to{width:100%}}@-o-keyframes progress{from{width:0%}to{width:100%}}@keyframes progress{from{width:0%}to{width:100%}}"}),(0,t.jsx)(p.l$,{position:"top-center",containerStyle:{top:80}})]})}},9852:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(5155),r=a(2115),d=a(3999);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[6237,6222,3464,3568,5744,1975,7949,8441,1684,7358],()=>s(6378)),_N_E=e.O()}]);