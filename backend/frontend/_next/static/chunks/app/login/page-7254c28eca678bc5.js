(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{646:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},968:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var r=s(2115),a=s(3655),n=s(5155),i=r.forwardRef((e,t)=>(0,n.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},2657:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2714:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(5155),a=s(2115),n=s(968),i=s(2085),l=s(3999);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),s),...a})});o.displayName=n.b.displayName},2919:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},3411:(e,t,s)=>{Promise.resolve().then(s.bind(s,5880))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},5339:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},5880:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),a=s(2115),n=s(7168),i=s(8482),l=s(9852),d=s(2714),o=s(9026),c=s(1976),u=s(5339),h=s(8883),m=s(2919),p=s(8749),f=s(2657),x=s(9894),g=s(5695);function v(e){let{onSuccess:t,redirectTo:s}=e,[v,y]=(0,a.useState)({email:"",password:""}),[b,N]=(0,a.useState)(!1),[w,j]=(0,a.useState)(""),[_,k]=(0,a.useState)(!1),S=(0,g.useRouter)(),A=async e=>{e.preventDefault(),N(!0),j("");try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),r=await e.json();r.success&&r.user?((0,x.lt)(r.user),t?t():S.push(s||"/")):j(r.message||"Đăng nhập thất bại")}catch(e){j("Đ\xe3 xảy ra lỗi. Vui l\xf2ng thử lại.")}finally{N(!1)}};return(0,r.jsxs)(i.Zp,{className:"w-full max-w-md mx-auto shadow-lg",children:[(0,r.jsxs)(i.aR,{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(c.A,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ZB,{className:"text-2xl font-bold",children:"Đăng nhập"}),(0,r.jsx)(i.BT,{className:"text-gray-600",children:"Đăng nhập v\xe0o hệ thống BloodConnect"})]})]}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[w&&(0,r.jsxs)(o.Fc,{variant:"destructive",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsx)(o.TN,{children:w})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"email",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(l.p,{id:"email",type:"email",placeholder:"admin@bloodconnect.vn",value:v.email,onChange:e=>y(t=>({...t,email:e.target.value})),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"password",children:"Mật khẩu"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(l.p,{id:"password",type:_?"text":"password",placeholder:"••••••••",value:v.password,onChange:e=>y(t=>({...t,password:e.target.value})),className:"pl-10 pr-10",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>k(!_),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:_?(0,r.jsx)(p.A,{className:"h-4 w-4"}):(0,r.jsx)(f.A,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(n.$,{type:"submit",className:"w-full",disabled:b,children:b?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Đang đăng nhập..."]}):"Đăng nhập"})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800",children:"T\xe0i khoản demo:"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"Admin:"})," admin@bloodconnect.vn / 123456"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"User:"})," user@example.com / 123456"]})]})]})]})]})}var y=s(6874),b=s.n(y),N=s(646);function w(){let e=(0,g.useSearchParams)().get("message");return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsx)("div",{className:"text-center mb-8",children:(0,r.jsxs)(b(),{href:"/",className:"inline-flex items-center space-x-2 text-2xl font-bold text-gray-900",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("span",{children:"BloodConnect"})]})}),e&&(0,r.jsxs)(o.Fc,{className:"mb-6 border-green-200 bg-green-50",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(o.TN,{className:"text-green-800",children:decodeURIComponent(e)})]}),(0,r.jsx)(v,{redirectTo:"/?login=success"}),(0,r.jsx)("div",{className:"text-center mt-6",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Chưa c\xf3 t\xe0i khoản?"," ",(0,r.jsx)(b(),{href:"/register",className:"text-red-600 hover:underline font-medium",children:"Đăng k\xfd ngay"})]})}),(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)(b(),{href:"/",className:"text-sm text-gray-600 hover:text-red-600",children:"← Về trang chủ"})})]})})}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>d});var r=s(5155),a=s(2115),n=s(9708),i=s(2085),l=s(3999);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:a,size:i,className:s})),ref:t,...c})});o.displayName="Button"},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l});var r=s(5155),a=s(2115),n=s(3999);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},8749:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},8883:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9026:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>d,TN:()=>o});var r=s(5155),a=s(2115),n=s(2085),i=s(3999);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),s),...n})});d.displayName="Alert",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});o.displayName="AlertDescription"},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155),a=s(2115),n=s(3999);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},9894:(e,t,s)=>{"use strict";s.d(t,{HW:()=>n,ri:()=>a,lt:()=>i});class r{initializeData(){this.users=[{id:"1",email:"admin@bloodconnect.vn",password_hash:"$2b$10$hash_for_123456",name:"Quản trị vi\xean",phone:null,address:null,blood_type:null,role:"admin",is_active:!0,last_donation:null,total_donations:0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",email:"user@example.com",password_hash:"$2b$10$hash_for_123456",name:"Nguyễn Văn A",phone:"0901234567",address:"Quận 1, TP.HCM",blood_type:"O+",role:"user",is_active:!0,last_donation:"2024-09-15",total_donations:5,created_at:"2024-03-15T00:00:00Z",updated_at:"2024-09-15T00:00:00Z"}],this.bloodInventory=[{id:"1",blood_type:"O-",units_available:45,units_reserved:5},{id:"2",blood_type:"O+",units_available:120,units_reserved:10},{id:"3",blood_type:"A-",units_available:78,units_reserved:8},{id:"4",blood_type:"A+",units_available:156,units_reserved:15},{id:"5",blood_type:"B-",units_available:34,units_reserved:3},{id:"6",blood_type:"B+",units_available:89,units_reserved:9},{id:"7",blood_type:"AB-",units_available:23,units_reserved:2},{id:"8",blood_type:"AB+",units_available:67,units_reserved:7}]}async findUserByEmail(e){return this.users.find(t=>t.email===e)||null}async findUserById(e){return this.users.find(t=>t.id===e)||null}async createUser(e){let t={id:"U".concat(Date.now()),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.users.push(t),t}async updateUser(e,t){let s=this.users.findIndex(t=>t.id===e);return -1!==s?(this.users[s]={...this.users[s],...t,updated_at:new Date().toISOString()},this.users[s]):null}async getBloodInventory(){return this.bloodInventory}async updateBloodInventory(e,t){let s=this.bloodInventory.findIndex(t=>t.blood_type===e);return -1!==s?(this.bloodInventory[s].units_available=t,this.bloodInventory[s]):null}async createBloodRequest(e){let t={id:"REQ".concat(Date.now()),...e,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.bloodRequests.push(t),t}async getBloodRequests(){return this.bloodRequests}async createAppointment(e){let t={id:"APT".concat(Date.now()),...e,status:"pending",created_at:new Date().toISOString()};return this.appointments.push(t),t}async getUserAppointments(e){return this.appointments.filter(t=>t.user_id===e)}async createDonationRecord(e){let t={id:"DON".concat(Date.now()),...e,created_at:new Date().toISOString()};return this.donationHistory.push(t),t}async getUserDonationHistory(e){return this.donationHistory.filter(t=>t.user_id===e)}async createNotification(e){let t={id:"NOT".concat(Date.now()),...e,is_read:!1,created_at:new Date().toISOString()};return this.notifications.push(t),t}async getUserNotifications(e){return this.notifications.filter(t=>t.user_id===e)}constructor(){this.users=[],this.donationHistory=[],this.bloodRequests=[],this.bloodInventory=[],this.appointments=[],this.notifications=[],this.initializeData()}}new r;let a=async()=>{localStorage.removeItem("currentUser"),localStorage.removeItem("authToken")},n=()=>{{let e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}},i=e=>{e?(localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("authToken","token_".concat(e.id))):(localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"))}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,450,441,684,358],()=>t(3411)),_N_E=e.O()}]);