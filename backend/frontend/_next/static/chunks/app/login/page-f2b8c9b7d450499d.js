(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{968:(e,s,a)=>{"use strict";a.d(s,{b:()=>n});var r=a(2115),t=a(3655),l=a(5155),d=r.forwardRef((e,s)=>(0,l.jsx)(t.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));d.displayName="Label";var n=d},2714:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var r=a(5155),t=a(2115),l=a(968),d=a(2085),n=a(3999);let i=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.b,{ref:s,className:(0,n.cn)(i(),a),...t})});c.displayName=l.b.displayName},3403:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=a(3464).A.create({baseURL:"/api"})},3864:(e,s,a)=>{Promise.resolve().then(a.bind(a,5880))},5880:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var r=a(5155),t=a(2115),l=a(7168),d=a(8482),n=a(9852),i=a(2714),c=a(9026),o=a(5339),m=a(1264),u=a(2919),x=a(8749),f=a(2657),h=a(395),p=a(5695),g=a(6766),v=a(3403),b=a(6874),j=a.n(b),N=a(3568),y=a(2509);function w(e){let{onSuccess:s,redirectTo:a}=e,[b,w]=(0,t.useState)({email:"",password:""}),[k,A]=(0,t.useState)(!1),[R,C]=(0,t.useState)(!1),[S,F]=(0,t.useState)(""),[T,D]=(0,t.useState)(!1),_=(0,p.useRouter)(),{setUser:B}=(0,h.A)(),L=async()=>{C(!0),_.push("/login/otp"),C(!1)},E=async e=>{e.preventDefault(),C(!0),F("");try{let e=await v.A.post("/users/login",{email:b.email,password:b.password}),r=await e.data;if(r.message&&r.user){if(console.log(r),!r.user.user.is_verified){F("T\xe0i khoản chưa được x\xe1c minh, H\xe3y x\xe1c minh t\xe0i khoản!");return}B(r.user.user),N.Ay.success("Ch\xe0o mừng, "+r.user.user.full_name),s?_.push(a||"/"):_.push(a||"/login")}else F(r.message||"Đăng nhập thất bại")}catch(e){F("Đ\xe3 xảy ra lỗi. Vui l\xf2ng thử lại. Vui l\xf2ng nhập đ\xfang mật khẩu, t\xe0i khoản.")}finally{C(!1)}};return(0,r.jsxs)(d.Zp,{className:"w-full max-w-md mx-auto shadow-lg",children:[(0,r.jsxs)(d.aR,{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden mx-auto",children:(0,r.jsx)(g.default,{src:"/images/logo.webp",alt:"ScαrletBlood Logo",width:64,height:64,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.ZB,{className:"text-2xl font-bold",children:"Đăng nhập"}),(0,r.jsx)(d.BT,{className:"text-gray-600",children:"Đăng nhập v\xe0o hệ thống ScαrletBlood"})]})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4 mb-2",children:[S&&(0,r.jsxs)(c.Fc,{variant:"destructive",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)(c.TN,{children:S})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"email",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(n.p,{id:"email",type:"email",placeholder:"admin@scarletblood.vn",value:b.email,onChange:e=>w(s=>({...s,email:e.target.value})),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"password",children:"Mật khẩu"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(n.p,{id:"password",type:T?"text":"password",placeholder:"••••••••",value:b.password,onChange:e=>w(s=>({...s,password:e.target.value})),className:"pl-10 pr-10",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>D(!T),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:T?(0,r.jsx)(x.A,{className:"h-4 w-4"}):(0,r.jsx)(f.A,{className:"h-4 w-4"})})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(y.A,{sitekey:"6Le19mkrAAAAAKWFaDg-rfWGbuBAGxpt5m5yoXDd",onChange:e=>A(e)})}),(0,r.jsx)(l.$,{type:"submit",className:"w-full",disabled:R||!k,children:R?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Đang đăng nhập..."]}):"Đăng nhập"})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(l.$,{type:"button",onClick:L,disabled:R,className:"w-full border border-red-500 bg-white text-red-500 hover:bg-red-50",children:R?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500 mr-2"}),"Đang chuẩn bị..."]}):"X\xe1c minh t\xe0i khoản"})}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800",children:"T\xe0i khoản demo:"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"Admin:"})," admin@scarletblood.vn / 123456"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"Donor:"})," donor@example.com / 123456"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"Recipient:"})," recipient@example.com / 123456"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[(0,r.jsx)("strong",{children:"Staff:"})," staff@example.com / 123456"]})]})]}),(0,r.jsx)("div",{className:"text-center mt-6",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Bạn qu\xean mật khẩu?"," ",(0,r.jsx)(j(),{href:"/login/reset",className:"text-red-600 hover:underline font-medium",children:"Lấy lại mật khẩu"})]})})]}),(0,r.jsx)(N.l$,{position:"top-center",containerStyle:{top:80}})]})}var k=a(646),A=a(7949),R=a(7746);function C(){let e=(0,p.useSearchParams)().get("message");return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white flex flex-col",children:[(0,r.jsx)(A.Header,{}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center p-4 py-16",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[e&&(0,r.jsxs)(c.Fc,{className:"mb-6 border-green-200 bg-green-50",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(c.TN,{className:"text-green-800",children:decodeURIComponent(e)})]}),(0,r.jsx)(w,{redirectTo:"/?login=success"})]})}),(0,r.jsx)(R.Footer,{})]})}},8482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>d,aR:()=>n});var r=a(5155),t=a(2115),l=a(3999);let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});d.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});i.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},9026:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>i,TN:()=>c});var r=a(5155),t=a(2115),l=a(2085),d=a(3999);let n=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=t.forwardRef((e,s)=>{let{className:a,variant:t,...l}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,d.cn)(n({variant:t}),a),...l})});i.displayName="Alert",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h5",{ref:s,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",a),...t})}).displayName="AlertTitle";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",a),...t})});c.displayName="AlertDescription"},9852:(e,s,a)=>{"use strict";a.d(s,{p:()=>d});var r=a(5155),t=a(2115),l=a(3999);let d=t.forwardRef((e,s)=>{let{className:a,type:t,...d}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...d})});d.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[912,837,233,568,561,975,949,441,684,358],()=>s(3864)),_N_E=e.O()}]);