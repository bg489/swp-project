(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{395:(t,e,n)=>{"use strict";n.d(e,{A:()=>l,AuthProvider:()=>r});var s=n(5155),a=n(2115),i=n(9894);let o=(0,a.createContext)(void 0);function r(t){let{children:e}=t,[n,r]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{r((0,i.HW)()),d(!1)},[]),(0,s.jsx)(o.Provider,{value:{user:n,setUser:t=>{r(t),(0,i.lt)(t)},isLoading:l,logout:()=>{r(null),(0,i.lt)(null),window.location.href="/"}},children:e})}function l(){let t=(0,a.useContext)(o);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},4886:(t,e,n)=>{Promise.resolve().then(n.bind(n,395)),Promise.resolve().then(n.t.bind(n,9840,23)),Promise.resolve().then(n.t.bind(n,9324,23))},9324:()=>{},9840:t=>{t.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},9894:(t,e,n)=>{"use strict";n.d(e,{HW:()=>a,lt:()=>i});class s{initializeData(){this.users=[{id:"1",email:"admin@scarletblood.vn",password_hash:"$2b$10$hash_for_123456",name:"Quản trị vi\xean",phone:null,address:null,blood_type:null,role:"admin",is_active:!0,last_donation:null,total_donations:0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",email:"user@example.com",password_hash:"$2b$10$hash_for_123456",name:"Nguyễn Văn A",phone:"0901234567",address:"Quận 1, TP.HCM",blood_type:"O+",role:"user",is_active:!0,last_donation:"2024-09-15",total_donations:5,created_at:"2024-03-15T00:00:00Z",updated_at:"2024-09-15T00:00:00Z"}],this.bloodInventory=[{id:"1",blood_type:"O-",units_available:45,units_reserved:5},{id:"2",blood_type:"O+",units_available:120,units_reserved:10},{id:"3",blood_type:"A-",units_available:78,units_reserved:8},{id:"4",blood_type:"A+",units_available:156,units_reserved:15},{id:"5",blood_type:"B-",units_available:34,units_reserved:3},{id:"6",blood_type:"B+",units_available:89,units_reserved:9},{id:"7",blood_type:"AB-",units_available:23,units_reserved:2},{id:"8",blood_type:"AB+",units_available:67,units_reserved:7}]}async findUserByEmail(t){return this.users.find(e=>e.email===t)||null}async findUserById(t){return this.users.find(e=>e.id===t)||null}async createUser(t){let e={id:"U".concat(Date.now()),...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.users.push(e),e}async updateUser(t,e){let n=this.users.findIndex(e=>e.id===t);return -1!==n?(this.users[n]={...this.users[n],...e,updated_at:new Date().toISOString()},this.users[n]):null}async getBloodInventory(){return this.bloodInventory}async updateBloodInventory(t,e){let n=this.bloodInventory.findIndex(e=>e.blood_type===t);return -1!==n?(this.bloodInventory[n].units_available=e,this.bloodInventory[n]):null}async createBloodRequest(t){let e={id:"REQ".concat(Date.now()),...t,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.bloodRequests.push(e),e}async getBloodRequests(){return this.bloodRequests}async createAppointment(t){let e={id:"APT".concat(Date.now()),...t,status:"pending",created_at:new Date().toISOString()};return this.appointments.push(e),e}async getUserAppointments(t){return this.appointments.filter(e=>e.user_id===t)}async createDonationRecord(t){let e={id:"DON".concat(Date.now()),...t,created_at:new Date().toISOString()};return this.donationHistory.push(e),e}async getUserDonationHistory(t){return this.donationHistory.filter(e=>e.user_id===t)}async createNotification(t){let e={id:"NOT".concat(Date.now()),...t,is_read:!1,created_at:new Date().toISOString()};return this.notifications.push(e),e}async getUserNotifications(t){return this.notifications.filter(e=>e.user_id===t)}constructor(){this.users=[],this.donationHistory=[],this.bloodRequests=[],this.bloodInventory=[],this.appointments=[],this.notifications=[],this.initializeData()}}new s;let a=()=>{{let t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}},i=t=>{t?(localStorage.setItem("currentUser",JSON.stringify(t)),localStorage.setItem("authToken","token_".concat(t._id))):(localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"))}}},t=>{var e=e=>t(t.s=e);t.O(0,[385,441,684,358],()=>e(4886)),_N_E=t.O()}]);