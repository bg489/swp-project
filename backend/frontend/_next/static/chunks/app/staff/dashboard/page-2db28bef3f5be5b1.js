(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1192],{1397:(e,s,t)=>{"use strict";t.d(s,{k:()=>r});var l=t(5155),a=t(2115),i=t(5863),n=t(3999);let r=a.forwardRef((e,s)=>{let{className:t,value:a,...r}=e;return(0,l.jsx)(i.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,l.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});r.displayName=i.bL.displayName},3403:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=t(3464).A.create({baseURL:"/api"})},4964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>r});var l=t(5155),a=t(2115),i=t(704),n=t(3999);let r=i.bL,d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});d.displayName=i.B8.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});c.displayName=i.l9.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});o.displayName=i.UC.displayName},5784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>h,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>x});var l=t(5155),a=t(2115),i=t(8715),n=t(6474),r=t(7863),d=t(5196),c=t(3999);let o=i.bL;i.YJ;let x=i.WT,h=a.forwardRef((e,s)=>{let{className:t,children:a,...r}=e;return(0,l.jsxs)(i.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[a,(0,l.jsx)(i.In,{asChild:!0,children:(0,l.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=i.l9.displayName;let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,l.jsx)(r.A,{className:"h-4 w-4"})})});m.displayName=i.PP.displayName;let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=i.wn.displayName;let p=a.forwardRef((e,s)=>{let{className:t,children:a,position:n="popper",...r}=e;return(0,l.jsx)(i.ZL,{children:(0,l.jsxs)(i.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,l.jsx)(m,{}),(0,l.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,l.jsx)(u,{})]})})});p.displayName=i.UC.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=i.JU.displayName;let f=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,l.jsxs)(i.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(i.VF,{children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})}),(0,l.jsx)(i.p4,{children:a})]})});f.displayName=i.q7.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(i.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=i.wv.displayName},8074:(e,s,t)=>{"use strict";t.d(s,{O:()=>c});var l=t(5155),a=t(2115),i=t(5695),n=t(9894),r=t(8482),d=t(1976);function c(e){let{children:s,requiredRole:t,redirectTo:c="/login"}=e,[o,x]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),u=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e=(0,n.HW)();if(!e){u.push(c);return}if(t&&("user"===t&&"admin"===e.role||"user"!==t&&e.role!==t)){"admin"===e.role?u.push("/admin/dashboard"):"staff"===e.role?u.push("/staff/dashboard"):u.push("/user/dashboard");return}x(e),m(!1)},[u,t,c]),h)?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsx)(r.Zp,{className:"w-full max-w-md",children:(0,l.jsxs)(r.Wu,{className:"flex flex-col items-center justify-center p-8",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,l.jsx)(d.A,{className:"w-8 h-8 text-white"})}),(0,l.jsx)("p",{className:"text-gray-600",children:"Đang kiểm tra quyền truy cập..."})]})})}):o?(0,l.jsx)(l.Fragment,{children:s}):null}},8145:(e,s,t)=>{"use strict";t.d(s,{E:()=>r});var l=t(5155);t(2115);var a=t(2085),i=t(3999);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:s,variant:t,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)(n({variant:t}),s),...a})}},8443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var l=t(5155),a=t(8074),i=t(8482),n=t(7168),r=t(8145),d=t(4964),c=t(1397),o=t(9852),x=t(5784),h=t(5273),m=t(7340),u=t(4835),p=t(7580),f=t(8691),j=t(1982),g=t(646),v=t(2318),y=t(7924),b=t(1976),N=t(9420),w=t(3717),_=t(7108),A=t(4616),C=t(1243),k=t(4186),S=t(446),T=t(6874),D=t.n(T),q=t(6766),B=t(395),R=t(7746),E=t(3403),Z=t(2115),K=t(3568);function $(){var e,s;let{user:t,logout:T}=(0,B.A)(),[$,z]=(0,Z.useState)({}),[W,L]=(0,Z.useState)([]),[O,V]=(0,Z.useState)([]),[U,H]=(0,Z.useState)([]),[F,G]=(0,Z.useState)([]),[M,Q]=(0,Z.useState)(""),[X,P]=(0,Z.useState)("donor"),[I,Y]=(0,Z.useState)([]),[J,ee]=(0,Z.useState)(""),[es,et]=(0,Z.useState)([]);function el(e){return({whole:"M\xe1u to\xe0n phần",RBC:"Hồng cầu (RBC)",plasma:"Huyết tương",platelet:"Tiểu cầu",pending:"Chờ xử l\xfd",approved:"Đ\xe3 ph\xea duyệt",matched:"Đ\xe3 gh\xe9p người hiến",in_progress:"Đang xử l\xfd",completed:"Đ\xe3 ho\xe0n tất",cancelled:"Đ\xe3 hủy",rejected:"Bị từ chối",scheduled:"Đ\xe3 l\xean lịch",fulfilled:"Đ\xe3 ho\xe0n th\xe0nh"})[e]||e}function ea(e,s){return e.find(e=>e.blood_type===s)}let ei=async(e,s)=>{try{if(await E.A.put("/staff/donations/".concat(s,"/update-status"),{status:e}),H(t=>t.map(t=>t._id===s?{...t,status:e}:t)),K.Ay.success("Đ\xe3 thay đổi status th\xe0nh ".concat(el(e))),"completed"===e){let e=await E.A.get("/staff/donations/id/".concat(s)),t=e.data.donation.donor_id._id,l=e.data.donation.donation_date,a=new Date(l),i=new Date(a.getTime()+6048e5).toISOString();await E.A.put("/users/donor/update-cooldown",{user_id:t,cooldown_until:i})}}catch(e){K.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật trạng th\xe1i. Vui l\xf2ng thử lại!"),console.error(e)}},en=async(e,s)=>{try{await E.A.put("/staff/donations-blood-inventory/".concat(s,"/update-status"),{status:e}),Y(t=>t.map(t=>{if(t._id!==s)return t;let l="cancelled"===e&&"cancelled"!==t.status,a="cancelled"===t.status&&("in_progress"===e||"fulfilled"===e);if(a&&t.inventory_item.quantity<t.volume){K.Ay.error("Kh\xf4ng đủ m\xe1u trong kho để phục hồi lại trạng th\xe1i!");return}let i=t.inventory_item.quantity;return l?i+=t.volume:a&&(i-=t.volume),G(e=>e.map(e=>{var s;return e.blood_type===(null===(s=t.inventory_item)||void 0===s?void 0:s.blood_type)?{...e,quantity:i}:e})),{...t,status:e,inventory_item:{...t.inventory_item,quantity:i}}})),K.Ay.success("Đ\xe3 thay đổi status th\xe0nh ".concat(e))}catch(e){K.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật trạng th\xe1i. Vui l\xf2ng thử lại!"),console.error(e)}},er=async(e,s,l)=>{console.log("Updating donor request status:",e,s,l,null==t?void 0:t._id);try{await E.A.put("/users/donor-requests/staff/".concat(s._id,"/status"),{status:e,staff_id:null==t?void 0:t._id}),s.status;let a="completed"===s.status,i="completed"===e,n="cancelled"===e,r=l.quantity,d=!1;i&&!a&&(r+=s.amount_offered,d=!0),a&&n&&(r-=s.amount_offered,d=!0),d&&(await E.A.put("/blood-in/blood-inventory/update/".concat(l._id),{quantity:r}),G(e=>e.map(e=>e.blood_type===s.blood_type_offered?{...e,quantity:r}:e))),et(t=>t.map(t=>t._id===s._id?{...t,status:e}:t)),K.Ay.success("Đ\xe3 thay đổi status th\xe0nh ".concat(e))}catch(e){K.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật trạng th\xe1i. Vui l\xf2ng thử lại!"),console.error(e)}},ed=e=>{let s=new Date;return new Date(e)<=s},ec=e=>{let s=new Date(e),t=String(s.getDate()).padStart(2,"0"),l=String(s.getMonth()+1).padStart(2,"0"),a=s.getFullYear();return"".concat(t,"/").concat(l,"/").concat(a)};(0,Z.useEffect)(()=>{async function e(){try{var e;if(!(null==t?void 0:t._id))return;let s=(await E.A.get("/users/staff-profiles/active/".concat(t._id))).data.staffProfile;if(z(s),null==s?void 0:null===(e=s.hospital)||void 0===e?void 0:e._id){let e=await E.A.get("/users/donor-profiles-by-hospital/".concat(s.hospital._id));L(e.data);let l=await E.A.get("/staff/blood-requests/get-list/".concat(s.hospital._id));V(l.data);let a=await E.A.get("/staff/donations/by-staff/".concat(t._id));H(a.data.data);let i=await E.A.get("/blood-in/blood-inventory/hospital/".concat(s.hospital._id));G(i.data.inventories),console.log("Blood Inventory:",ea(i.data.inventories,"O-"));let n=await E.A.get("/staff/donations-warehouse/by-staff/".concat(t._id));Y(n.data.data);let r=await E.A.get("/users/donor/staff/get-requests-by-hospital/".concat(s.hospital._id));et(r.data.requests)}}catch(e){console.error("Failed to fetch staff profile or hospital:",e)}}(null==t?void 0:t._id)&&e()},[t]);let eo=[{type:"O-",available:45,reserved:5,status:"low",target:100,color:"bg-red-500",expiringSoon:5},{type:"O+",available:120,reserved:10,status:"good",target:150,color:"bg-red-400",expiringSoon:8},{type:"A-",available:78,reserved:8,status:"good",target:100,color:"bg-blue-500",expiringSoon:3},{type:"A+",available:156,reserved:15,status:"good",target:150,color:"bg-blue-400",expiringSoon:12},{type:"B-",available:34,reserved:3,status:"critical",target:80,color:"bg-green-500",expiringSoon:2},{type:"B+",available:89,reserved:9,status:"good",target:120,color:"bg-green-400",expiringSoon:7},{type:"AB-",available:23,reserved:2,status:"critical",target:60,color:"bg-purple-500",expiringSoon:1},{type:"AB+",available:67,reserved:7,status:"good",target:80,color:"bg-purple-400",expiringSoon:4}],ex=e=>{switch(e){case"active":case"completed":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800"}},eh=e=>e<30?"bg-red-100 text-red-800":e<150?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800";return(0,l.jsx)(a.O,{requiredRole:"staff",children:(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,l.jsx)("header",{className:"bg-white border-b sticky top-0 z-50",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(D(),{href:"/",className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:(0,l.jsx)(q.default,{src:"/images/logo.webp",alt:"ScαrletBlood Logo",width:40,height:40,className:"w-full h-full object-cover"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ScαrletBlood Staff"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Bảng điều khiển nh\xe2n vi\xean"})]})]}),(0,l.jsxs)(r.E,{className:"bg-blue-100 text-blue-800",children:[(0,l.jsx)(h.A,{className:"w-3 h-3 mr-1"}),"Nh\xe2n vi\xean"]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["Xin ch\xe0o, ",(0,l.jsx)("strong",{children:"Staff"})]}),(0,l.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,l.jsxs)(D(),{href:"/",children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Về trang chủ"]})}),(0,l.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{T()},children:[(0,l.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Đăng xuất"]})]})]})})}),(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 flex-grow",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ZB,{className:"text-sm font-medium",children:"Người hiến m\xe1u"}),(0,l.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:1247}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==W?void 0:W.count)||"__"," đang hoạt động"]})]})]}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ZB,{className:"text-sm font-medium",children:"Kho m\xe1u"}),(0,l.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:612}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[3," loại sắp hết"]})]})]}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ZB,{className:"text-sm font-medium",children:"Y\xeau cầu m\xe1u"}),(0,l.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null==O?void 0:O.count)||"0"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"đang chờ xử l\xfd"})]})]}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ZB,{className:"text-sm font-medium",children:"Cơ sở l\xe0m việc"}),(0,l.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==$?void 0:null===(e=$.hospital)||void 0===e?void 0:e.name)||"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==$?void 0:null===(s=$.hospital)||void 0===s?void 0:s.address)||"Kh\xf4ng c\xf3 th\xf4ng tin"})]})]})]}),(0,l.jsxs)(d.tU,{defaultValue:"donors",className:"space-y-6",children:[(0,l.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,l.jsx)(d.Xi,{value:"donors",children:"Người hiến m\xe1u"}),(0,l.jsx)(d.Xi,{value:"inventory",children:"Kho m\xe1u"}),(0,l.jsx)(d.Xi,{value:"requests",children:"Y\xeau cầu m\xe1u"}),(0,l.jsx)(d.Xi,{value:"reports",children:"Quản l\xfd lịch tr\xecnh hiến m\xe1u"})]}),(0,l.jsx)(d.av,{value:"donors",className:"space-y-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Quản l\xfd người hiến m\xe1u"}),(0,l.jsxs)(n.$,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Th\xeam người hiến"]})]}),(0,l.jsx)(i.BT,{children:"Quản l\xfd th\xf4ng tin v\xe0 lịch sử hiến m\xe1u của người hiến"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)(o.p,{placeholder:"T\xecm kiếm theo t\xean, email, số điện thoại...",className:"pl-10"})]}),(0,l.jsxs)(x.l6,{children:[(0,l.jsx)(x.bq,{className:"w-40",children:(0,l.jsx)(x.yv,{placeholder:"Nh\xf3m m\xe1u"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"all",children:"Tất cả"}),(0,l.jsx)(x.eb,{value:"O+",children:"O+"}),(0,l.jsx)(x.eb,{value:"O-",children:"O-"}),(0,l.jsx)(x.eb,{value:"A+",children:"A+"}),(0,l.jsx)(x.eb,{value:"A-",children:"A-"}),(0,l.jsx)(x.eb,{value:"B+",children:"B+"}),(0,l.jsx)(x.eb,{value:"B-",children:"B-"}),(0,l.jsx)(x.eb,{value:"AB+",children:"AB+"}),(0,l.jsx)(x.eb,{value:"AB-",children:"AB-"})]})]}),(0,l.jsxs)(x.l6,{children:[(0,l.jsx)(x.bq,{className:"w-40",children:(0,l.jsx)(x.yv,{placeholder:"Trạng th\xe1i"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"all",children:"Tất cả"}),(0,l.jsx)(x.eb,{value:"active",children:"Hoạt động"}),(0,l.jsx)(x.eb,{value:"inactive",children:"Kh\xf4ng hoạt động"})]})]})]}),(0,l.jsx)("div",{className:"space-y-4",children:Array.isArray(null==W?void 0:W.donors)&&W.donors.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(b.A,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.user_id.full_name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.user_id.email}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,l.jsx)(r.E,{variant:"outline",className:"text-red-600",children:e.blood_type}),(0,l.jsx)(r.E,{className:ed(e.availability_date)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:ed(e.availability_date)?"Hoạt động":"Kh\xf4ng hoạt động"}),(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:[e.totalDonations||"0"," lần hiến"]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("div",{className:"text-right text-sm",children:[(0,l.jsxs)("p",{className:"text-gray-600",children:["Lần cuối: ",e.lastDonation||"0"]}),(0,l.jsxs)("p",{className:"text-gray-500",children:["C\xf3 thể hiến: ",ec(e.availability_date)]})]}),(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"Gọi"]}),(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),"Sửa"]})]})]},e._id||e.user_id._id))})]})]})}),(0,l.jsx)(d.av,{value:"inventory",className:"space-y-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(_.A,{className:"w-5 h-5 mr-2"}),"Quản l\xfd kho m\xe1u"]}),(0,l.jsxs)(n.$,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Nhập m\xe1u mới"]})]}),(0,l.jsx)(i.BT,{children:"Theo d\xf5i tồn kho v\xe0 t\xecnh trạng m\xe1u theo từng nh\xf3m"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:F.map(e=>(0,l.jsxs)(i.Zp,{className:"relative",children:[(0,l.jsx)(i.aR,{className:"pb-2",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(i.ZB,{className:"text-lg font-bold text-red-600",children:e.blood_type}),(0,l.jsx)(r.E,{className:eh(e.quantity),children:e.quantity<30?"Rất thấp":e.quantity<150?"Thấp":"Tốt"})]})}),(0,l.jsx)(i.Wu,{children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{children:"C\xf3 sẵn:"}),(0,l.jsxs)("span",{className:"font-semibold",children:[e.quantity," đơn vị"]})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{children:"Đ\xe3 đặt:"}),(0,l.jsx)("span",{className:"font-semibold",children:"0 đơn vị"})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{children:"Sắp hết hạn:"}),(0,l.jsxs)("span",{className:"font-semibold text-orange-600",children:[e.expiring_quantity," đơn vị"]})]}),(0,l.jsx)(c.k,{value:Math.min(e.quantity/500*100,100),className:"h-2 mt-2"})]})})]},e.blood_type))}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)(i.Zp,{children:[(0,l.jsx)(i.aR,{children:(0,l.jsx)(i.ZB,{className:"text-lg",children:"Cảnh b\xe1o tồn kho"})}),(0,l.jsx)(i.Wu,{children:(0,l.jsx)("div",{className:"space-y-3",children:eo.filter(e=>"critical"===e.status||"low"===e.status).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(C.A,{className:"w-5 h-5 ".concat("critical"===e.status?"text-red-600":"text-yellow-600")}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium",children:["Nh\xf3m m\xe1u ",e.type]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["C\xf2n ",e.available," đơn vị"]})]})]}),(0,l.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Li\xean hệ người hiến"})]},e.type))})})]}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsx)(i.aR,{children:(0,l.jsx)(i.ZB,{className:"text-lg",children:"M\xe1u sắp hết hạn"})}),(0,l.jsx)(i.Wu,{children:(0,l.jsx)("div",{className:"space-y-3",children:eo.filter(e=>e.expiringSoon>0).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(k.A,{className:"w-5 h-5 text-orange-600"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium",children:["Nh\xf3m m\xe1u ",e.type]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[e.expiringSoon," đơn vị sắp hết hạn"]})]})]}),(0,l.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Ưu ti\xean sử dụng"})]},e.type))})})]})]})]})]})}),(0,l.jsx)(d.av,{value:"requests",className:"space-y-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Quản l\xfd y\xeau cầu m\xe1u"}),(0,l.jsxs)(n.$,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Th\xeam người hiến"]})]}),(0,l.jsx)(i.BT,{children:"Quản l\xfd th\xf4ng tin về y\xeau cầu m\xe1u"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"flex items-center space-x-4 mb-6",children:(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)(o.p,{placeholder:"T\xecm kiếm theo t\xean, email, số điện thoại...",className:"pl-10"})]})}),(0,l.jsx)("div",{className:"space-y-4",children:Array.isArray(O.data)&&O.data.map(e=>(0,l.jsx)(D(),{href:"/staff/edit/request?requestId=".concat(e._id),className:"block",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between p-4 border rounded-lg space-y-4 md:space-y-0 md:space-x-6 hover:bg-gray-50 transition",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(b.A,{className:"w-6 h-6 text-orange-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.recipient_id.full_name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.recipient_id.email}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["SĐT: ",e.recipient_id.phone]})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,l.jsx)(r.E,{variant:"outline",className:"text-red-600",children:e.blood_type_needed}),(0,l.jsx)(r.E,{className:"bg-blue-100 text-blue-800",children:e.components_needed.join(", ")}),(0,l.jsx)(r.E,{className:e.is_emergency?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:e.is_emergency?"Khẩn cấp":"Kh\xf4ng khẩn cấp"}),(0,l.jsx)(r.E,{className:ex(e.status),children:e.status})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsxs)("p",{children:["Số lượng cần: ",(0,l.jsx)("strong",{children:e.amount_needed})," đơn vị"]}),(0,l.jsxs)("p",{children:["Khoảng c\xe1ch: ",(0,l.jsxs)("strong",{children:[e.distance," km"]})]}),(0,l.jsxs)("p",{children:["Ghi ch\xfa: ",e.comment||"Kh\xf4ng c\xf3"]}),(0,l.jsxs)("p",{children:["Ng\xe0y tạo: ",ec(e.createdAt)]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between items-end space-y-3 min-w-[220px]",children:[(0,l.jsxs)("div",{className:"text-right text-sm",children:[(0,l.jsx)("p",{className:"font-medium text-gray-800",children:e.hospital.name}),(0,l.jsx)("p",{className:"text-gray-600",children:e.hospital.address}),(0,l.jsxs)("p",{className:"text-gray-600",children:["SĐT: ",e.hospital.phone]})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:[(0,l.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"Gọi"]}),(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),"Sửa"]})]})]})]})},e._id))})]})]})}),(0,l.jsx)(d.av,{value:"reports",className:"space-y-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Quản l\xfd lịch tr\xecnh hiến m\xe1u"}),(0,l.jsxs)(n.$,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Th\xeam người hiến"]})]}),(0,l.jsx)(i.BT,{children:"Quản l\xfd th\xf4ng tin về lịch tr\xecnh hiến m\xe1u"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)(o.p,{placeholder:"T\xecm kiếm theo t\xean, email, số điện thoại...",className:"pl-10"})]}),(0,l.jsxs)(x.l6,{onValueChange:P,children:[(0,l.jsx)(x.bq,{className:"w-40",children:(0,l.jsx)(x.yv,{placeholder:"Nh\xf3m m\xe1u"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"donor",children:"Người Hiến M\xe1u"}),(0,l.jsx)(x.eb,{value:"blood-inventory",children:"Kho M\xe1u"}),(0,l.jsx)(x.eb,{value:"donor-request",children:"Hiến M\xe1u V\xe0o Kho"})]})]})]}),(0,l.jsxs)(i.Wu,{className:"space-y-4",children:["donor"===X&&Array.isArray(U)&&U.length>0?U.map(e=>{var s,t,a,i,d,c,o,h,m;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between p-4 border rounded-lg space-y-4 md:space-y-0 md:space-x-6 hover:bg-gray-50 transition",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(b.A,{className:"w-6 h-6 text-red-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium",children:["Người hiến: ",(null===(s=e.donor_id)||void 0===s?void 0:s.full_name)||"Kh\xf4ng r\xf5"]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=e.donor_id)||void 0===t?void 0:t.email}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["SĐT: ",null===(a=e.donor_id)||void 0===a?void 0:a.phone]})]})]}),e.recipient_id&&(0,l.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,l.jsxs)("p",{className:"font-medium",children:["Người nhận: ",null===(i=e.recipient_id)||void 0===i?void 0:i.full_name]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:null===(d=e.recipient_id)||void 0===d?void 0:d.email}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["SĐT: ",null===(c=e.recipient_id)||void 0===c?void 0:c.phone]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,l.jsx)(r.E,{className:"bg-blue-100 text-blue-800",children:null===(o=e.donation_type)||void 0===o?void 0:o.join(", ")}),(0,l.jsx)(r.E,{className:"scheduled"===e.status?"bg-yellow-100 text-yellow-800":"completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",children:el(e.status)})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,l.jsxs)("p",{children:["Ng\xe0y hiến: ",(0,l.jsx)("strong",{children:ec(e.donation_date)})]}),(0,l.jsxs)("p",{children:["Khối lượng: ",(0,l.jsx)("strong",{children:e.volume})," đơn vị"]}),(0,l.jsxs)("p",{children:["Ghi ch\xfa: ",e.notes||"Kh\xf4ng c\xf3"]}),(0,l.jsxs)("p",{children:["Ng\xe0y tạo: ",ec(e.createdAt)]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between items-end space-y-3 min-w-[220px]",children:[(0,l.jsxs)("div",{className:"text-right text-sm",children:[(0,l.jsx)("p",{className:"font-medium text-gray-800",children:"Cập nhật bởi:"}),(0,l.jsx)("p",{className:"text-gray-600",children:(null===(h=e.updated_by)||void 0===h?void 0:h.full_name)||"Chưa r\xf5"}),(0,l.jsx)("p",{className:"text-gray-600",children:(null===(m=e.updated_by)||void 0===m?void 0:m.email)||"-"}),(0,l.jsx)("p",{className:"font-medium text-gray-800",children:"\uD83D\uDEE0 Cập nhật trạng th\xe1i:"}),(0,l.jsxs)(x.l6,{onValueChange:Q,value:M,children:[(0,l.jsx)(x.bq,{className:"w-full md:w-[300px] border-gray-300",children:(0,l.jsx)(x.yv,{placeholder:"Chọn trạng th\xe1i"})}),(0,l.jsx)(x.gC,{children:[{key:"scheduled",label:"Đ\xe3 l\xean lịch"},{key:"completed",label:"Đ\xe3 ho\xe0n tất"},{key:"cancelled",label:"Đ\xe3 hủy"}].map(e=>(0,l.jsx)(x.eb,{value:e.key,children:e.label},e.key))})]}),(0,l.jsx)(n.$,{className:"mt-2 bg-blue-600 text-white hover:bg-blue-700",disabled:!M||M===(null==e?void 0:e.status),onClick:()=>ei(M,e._id),children:"Cập nhật trạng th\xe1i"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"Gọi"]}),(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),"Sửa"]})]})]})]},e._id)}):"blood-inventory"===X?"":"donor-request"===X?"":(0,l.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm thấy người hiến m\xe1u."}),"blood-inventory"===X&&Array.isArray(I)&&I.length>0?I.map(e=>{var s,t,a,i,d,c,o,h,m;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between p-4 border rounded-lg space-y-4 md:space-y-0 md:space-x-6 hover:bg-gray-50 transition",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(S.A,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium",children:["Nh\xf3m m\xe1u: ",(null===(s=e.inventory_item)||void 0===s?void 0:s.blood_type)||"Kh\xf4ng r\xf5"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Th\xe0nh phần: ",null===(t=e.inventory_item)||void 0===t?void 0:t.component]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Lượng tồn: ",null===(a=e.inventory_item)||void 0===a?void 0:a.quantity," đơn vị"]})]})]}),e.recipient_id&&(0,l.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,l.jsxs)("p",{className:"font-medium",children:["Người nhận: ",null===(i=e.recipient_id)||void 0===i?void 0:i.full_name]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:null===(d=e.recipient_id)||void 0===d?void 0:d.email}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["SĐT: ",null===(c=e.recipient_id)||void 0===c?void 0:c.phone]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,l.jsx)(r.E,{className:"bg-blue-100 text-blue-800",children:null===(o=e.inventory_item)||void 0===o?void 0:o.component}),(0,l.jsx)(r.E,{className:"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"fulfilled"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:el(e.status)})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,l.jsxs)("p",{children:["Ng\xe0y r\xfat m\xe1u: ",(0,l.jsx)("strong",{children:ec(e.donation_date)})]}),(0,l.jsxs)("p",{children:["Khối lượng r\xfat: ",(0,l.jsx)("strong",{children:e.volume})," đơn vị"]}),(0,l.jsxs)("p",{children:["Ghi ch\xfa: ",e.notes||"Kh\xf4ng c\xf3"]}),(0,l.jsxs)("p",{children:["Ng\xe0y tạo: ",ec(e.createdAt)]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between items-end space-y-3 min-w-[220px]",children:[(0,l.jsxs)("div",{className:"text-right text-sm",children:[(0,l.jsx)("p",{className:"font-medium text-gray-800",children:"Cập nhật bởi:"}),(0,l.jsx)("p",{className:"text-gray-600",children:(null===(h=e.updated_by)||void 0===h?void 0:h.full_name)||"Chưa r\xf5"}),(0,l.jsx)("p",{className:"text-gray-600",children:(null===(m=e.updated_by)||void 0===m?void 0:m.email)||"-"}),(0,l.jsx)("p",{className:"font-medium text-gray-800",children:"\uD83D\uDEE0 Cập nhật trạng th\xe1i:"}),(0,l.jsxs)(x.l6,{onValueChange:ee,value:J,children:[(0,l.jsx)(x.bq,{className:"w-full md:w-[300px] border-gray-300",children:(0,l.jsx)(x.yv,{placeholder:"Chọn trạng th\xe1i"})}),(0,l.jsx)(x.gC,{children:[{key:"in_progress",label:"Đang tiến h\xe0nh"},{key:"fulfilled",label:"Đ\xe3 ho\xe0n tất"},{key:"cancelled",label:"Đ\xe3 hủy"}].map(e=>(0,l.jsx)(x.eb,{value:e.key,children:e.label},e.key))})]}),(0,l.jsx)(n.$,{className:"mt-2 bg-blue-600 text-white hover:bg-blue-700",disabled:!J||J===e.status,onClick:()=>en(J,e._id),children:"Cập nhật trạng th\xe1i"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"Gọi"]}),(0,l.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),"Sửa"]})]})]})]},e._id)}):"donor"===X?"":"donor-request"===X?"":(0,l.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm thấy dữ liệu r\xfat m\xe1u từ kho."}),"donor-request"===X&&Array.isArray(es)&&es.length>0?es.map(e=>{var s,t,a,i,d;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between p-6 border border-yellow-300 rounded-xl bg-gradient-to-br from-yellow-50 via-white to-blue-50 hover:shadow-md transition",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(S.A,{className:"w-6 h-6 text-red-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold text-yellow-800",children:["Nh\xf3m m\xe1u: ",e.blood_type_offered]}),(0,l.jsxs)("p",{className:"text-sm text-gray-700",children:["Th\xe0nh phần hiến: ",null===(s=e.components_offered)||void 0===s?void 0:s.join(", ")]}),(0,l.jsxs)("p",{className:"text-sm text-gray-700",children:["Lượng tồn: ",ea(F,e.blood_type_offered).quantity," đơn vị"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-700",children:["Số lượng muốn hiến: ",e.amount_offered," đơn vị"]})]})]}),e.donor_id&&(0,l.jsxs)("div",{className:"border-t border-yellow-200 pt-3 space-y-1",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-800",children:["\uD83D\uDC64 Người hiến: ",e.donor_id.full_name]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCE7 ",e.donor_id.email]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCDE ",e.donor_id.phone]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.components_offered.map(e=>(0,l.jsx)(r.E,{className:"bg-yellow-200 text-yellow-900 border border-yellow-400",children:el(e)},e)),(0,l.jsx)(r.E,{className:"in_progress"===e.status?"bg-yellow-300 text-yellow-900":"fulfilled"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800",children:el(e.status)})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-700 mt-1 space-y-1",children:[(0,l.jsxs)("p",{children:["\uD83D\uDCC5 Ng\xe0y hiến dự kiến: ",(0,l.jsx)("strong",{children:ec(e.available_date)})]}),(0,l.jsxs)("p",{children:["\uD83D\uDD53 Khung giờ: ",(0,l.jsxs)("strong",{children:[null===(t=e.available_time_range)||void 0===t?void 0:t.from," - ",null===(a=e.available_time_range)||void 0===a?void 0:a.to]})]}),(0,l.jsxs)("p",{children:["\uD83D\uDCDD Ghi ch\xfa: ",e.comment||"Kh\xf4ng c\xf3"]}),(0,l.jsxs)("p",{children:["⏱ Ng\xe0y tạo: ",ec(e.createdAt)]})]})]}),(0,l.jsx)("div",{className:"flex flex-col justify-between items-end space-y-4 min-w-[240px] pl-4 border-l border-blue-200",children:(0,l.jsxs)("div",{className:"text-right text-sm text-blue-900 space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold text-blue-800",children:"\uD83C\uDFE5 Bệnh viện:"}),(0,l.jsx)("p",{children:null===(i=e.hospital)||void 0===i?void 0:i.name}),(0,l.jsx)("p",{className:"text-blue-700",children:null===(d=e.hospital)||void 0===d?void 0:d.address}),(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:"⚙️ Trạng th\xe1i:"}),(0,l.jsxs)(x.l6,{onValueChange:ee,value:J,children:[(0,l.jsx)(x.bq,{className:"w-full md:w-[240px] border-blue-300 focus:ring-blue-400",children:(0,l.jsx)(x.yv,{placeholder:"Chọn trạng th\xe1i"})}),(0,l.jsx)(x.gC,{children:[{key:"pending",label:"Đang đề nghị"},{key:"in_progress",label:"Đang tiến h\xe0nh"},{key:"completed",label:"Ho\xe0n tất"},{key:"cancelled",label:"Đ\xe3 hủy"}].map(e=>(0,l.jsx)(x.eb,{value:e.key,children:e.label},e.key))})]})]}),(0,l.jsx)(n.$,{className:"mt-3 bg-blue-600 hover:bg-blue-700 text-white shadow",disabled:!J||J===e.status,onClick:()=>er(J,e,ea(F,e.blood_type_offered)),children:"Cập nhật"})]})})]},e._id)}):"donor"===X?"":"blood-inventory"===X?"":(0,l.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm thấy y\xeau cầu hiến m\xe1u từ người hiến."})]})]})]})})]})]}),(0,l.jsx)(K.l$,{position:"top-center",containerStyle:{top:80}}),(0,l.jsx)(R.Footer,{})]})})}},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>r});var l=t(5155),a=t(2115),i=t(3999);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let r=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});r.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var l=t(5155),a=t(2115),i=t(3999);let n=a.forwardRef((e,s)=>{let{className:t,type:a,...n}=e;return(0,l.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},9957:(e,s,t)=>{Promise.resolve().then(t.bind(t,8443))}},e=>{var s=s=>e(e.s=s);e.O(0,[6237,3464,3568,461,8706,1975,8441,1684,7358],()=>s(9957)),_N_E=e.O()}]);