(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5218],{646:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},968:(e,t,s)=>{"use strict";s.d(t,{b:()=>d});var a=s(2115),n=s(3655),l=s(5155),r=a.forwardRef((e,t)=>(0,l.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var d=r},2402:(e,t,s)=>{Promise.resolve().then(s.bind(s,9663))},2714:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var a=s(5155),n=s(2115),l=s(968),r=s(2085),d=s(3999);let i=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,d.cn)(i(),s),...n})});o.displayName=l.b.displayName},3403:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=s(3464).A.create({baseURL:"/api"})},5784:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>h});var a=s(5155),n=s(2115),l=s(8715),r=s(6474),d=s(7863),i=s(5196),o=s(3999);let c=l.bL;l.YJ;let h=l.WT,u=n.forwardRef((e,t)=>{let{className:s,children:n,...d}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[n,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});m.displayName=l.PP.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(r.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let x=n.forwardRef((e,t)=>{let{className:s,children:n,position:r="popper",...d}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...d,children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(p,{})]})})});x.displayName=l.UC.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=l.JU.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:n})]})});f.displayName=l.q7.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=l.wv.displayName},8145:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var a=s(5155);s(2115);var n=s(2085),l=s(3999);let r=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)(r({variant:s}),t),...n})}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>r,aR:()=>d});var a=s(5155),n=s(2115),l=s(3999);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});r.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...n})});d.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});i.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},8691:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},9074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9663:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),n=s(5695),l=s(2115),r=s(7168),d=s(8145),i=s(8482),o=s(5784),c=s(8691),h=s(9074),u=s(646),m=s(9420),p=s(7949),x=s(7746),f=s(3568),g=s(395),y=s(3403),b=s(2714),v=s(9852);function j(){var e,t,s,j,N,_;let{user:w,logout:A}=(0,g.A)(),k=(0,n.useRouter)(),[C,D]=(0,l.useState)(null),R=(0,n.useSearchParams)().get("requestId")||"",[S,M]=(0,l.useState)([]),[B,K]=(0,l.useState)({}),[q,E]=(0,l.useState)([]),[T,F]=(0,l.useState)({}),[P,Z]=(0,l.useState)(""),[z,I]=(0,l.useState)(""),[L,V]=(0,l.useState)(""),[J,G]=(0,l.useState)([]),[$,U]=(0,l.useState)(""),[W,H]=(0,l.useState)([]);function O(e,t,s){let a=e.find(e=>e.blood_type===t&&e.component===s);return a?a.quantity:0}let X=async()=>{try{let e=J.find(e=>e.blood_type===T.blood_type_needed);console.log(B.hospital._id),await y.A.post("/staff/donation-blood-inventory",{inventory_item:e._id,recipient_id:T.recipient_id._id,donation_date:$,volume:T.amount_needed,updated_by:B.user_id._id,notes:L,hospital:B.hospital._id}),await y.A.put("/staff/blood-requests/".concat(R,"/status"),{status:"matched"}),f.Ay.success("Đ\xe3 x\xe1c nhận lấy m\xe1u từ kho"),k.push("/staff/dashboard")}catch(e){console.error("Lỗi x\xe1c nhận lấy m\xe1u từ kho:",e),f.Ay.error("X\xe1c nhận thất bại, vui l\xf2ng thử lại!")}},Y=e=>{let t=new Date(e),s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return"".concat(s,"/").concat(a,"/").concat(n)};(0,l.useEffect)(()=>{let e=async(e,t,s)=>{try{let a=(await y.A.get("/hospital/")).data.hospitals,n=(e,t,s,a)=>{let n=(s-e)*Math.PI/180,l=(a-t)*Math.PI/180,r=Math.sin(n/2)**2+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)**2,d=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return 6371*d},l=a.filter(a=>n(e,t,a.latitude,a.longitude)<=s).map(e=>({_id:e._id,name:e.name,address:e.address,phone:e.phone}));if(H(l),l.length>0)return f.Ay.success("T\xecm thấy ".concat(l.length," bệnh viện trong ").concat(s," km!")),l;f.Ay.error("Kh\xf4ng t\xecm thấy bệnh viện n\xe0o trong ".concat(s," km."))}catch(e){console.error("Lỗi lấy danh s\xe1ch bệnh viện:",e),f.Ay.error("Đ\xe3 xảy ra lỗi khi t\xecm bệnh viện!")}};async function t(){try{var t;let s=(await y.A.get("/users/staff-profiles/active/".concat(w._id))).data.staffProfile;if(K(s),null==s?void 0:null===(t=s.hospital)||void 0===t?void 0:t._id){let t=await y.A.get("/staff/blood-request/get-by-id/".concat(R));F(t.data),Z(null==T?void 0:T.status);let a=(await e(t.data.hospital.latitude,t.data.hospital.longitude,t.data.distance)).map(e=>e._id),n=await y.A.post("/users/donors/by-hospitals-and-bloodtype",{hospitalIds:a,recipientBloodType:t.data.blood_type_needed});E(n.data);let l=await y.A.get("/blood-in/blood-inventory/hospital/".concat(s.hospital._id));G(l.data.inventories)}}catch(e){console.error("Failed to fetch staff profile or hospital:",e)}}(null==w?void 0:w._id)&&t()},[w]),(0,l.useEffect)(()=>{D({recipient_id:{full_name:"Nguyễn Văn A"},blood_type_needed:"O+",amount_needed:2,status:"pending",is_emergency:!0,createdAt:new Date().toISOString()}),M([{_id:"donor1",user_id:{full_name:"Nguyễn Văn B",email:"b@example.com",phone:"0123456789"},distance:5.2,blood_type:"A+",donation_start_date:"2024-06-15T00:00:00Z"},{_id:"donor2",user_id:{full_name:"L\xea Văn C",email:"c@example.com",phone:"0987654321"},distance:8.7,blood_type:"A+",donation_start_date:"2024-06-15T00:00:00Z"}])},[]);let Q=async e=>{try{await y.A.put("/staff/blood-requests/".concat(R,"/status"),{status:e}),f.Ay.success("Đ\xe3 thay đổi status th\xe0nh ".concat(e)),F(t=>({...t,status:e}))}catch(e){f.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật trạng th\xe1i. Vui l\xf2ng thử lại!"),console.error(e)}},ee=async e=>{try{await y.A.post("/staff/donation",{donor_id:e,recipient_id:T.recipient_id._id,donation_date:z,donation_type:T.components_needed[0],volume:T.amount_needed,status:"scheduled",updated_by:B.user_id._id,notes:L}),await y.A.put("/staff/blood-requests/".concat(R,"/status"),{status:"matched"}),f.Ay.success("Th\xe0nh c\xf4ng y\xeau cầu hiến m\xe1u"),k.push("/staff/dashboard")}catch(e){f.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật trạng th\xe1i. Vui l\xf2ng thử lại!"),console.error(e)}};return C?(0,a.jsxs)("div",{children:[(0,a.jsx)(p.Header,{}),(0,a.jsxs)("div",{className:"container mx-auto py-8 space-y-8",children:[(0,a.jsxs)(i.Zp,{className:"shadow-lg rounded-2xl",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{className:"text-2xl font-bold",children:"\uD83E\uDE78 Chi tiết y\xeau cầu m\xe1u"}),(0,a.jsx)(i.BT,{className:"text-gray-600",children:"Th\xf4ng tin chi tiết & cập nhật trạng th\xe1i"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Bệnh nh\xe2n:"})," ",(null==T?void 0:null===(e=T.recipient_id)||void 0===e?void 0:e.full_name)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Email:"})," ",(null==T?void 0:null===(t=T.recipient_id)||void 0===t?void 0:t.email)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Điện thoại:"})," ",(null==T?void 0:null===(s=T.recipient_id)||void 0===s?void 0:s.phone)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Nh\xf3m m\xe1u cần:"})," ",(null==T?void 0:T.blood_type_needed)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Th\xe0nh phần cần:"})," ",(null==T?void 0:null===(j=T.components_needed)||void 0===j?void 0:j.join(", "))||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Số lượng:"})," ",(null==T?void 0:T.amount_needed)||"Kh\xf4ng r\xf5"," đơn vị"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Khoảng c\xe1ch:"})," ",(null==T?void 0:T.distance)!==void 0?"".concat(T.distance," km"):"Kh\xf4ng r\xf5"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Bệnh viện:"})," ",(null==T?void 0:null===(N=T.hospital)||void 0===N?void 0:N.name)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Địa chỉ BV:"})," ",(null==T?void 0:null===(_=T.hospital)||void 0===_?void 0:_.address)||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"T\xecnh trạng:"})," ",(0,a.jsx)(d.E,{className:"capitalize",children:(null==T?void 0:T.status)||"Pending"})]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Khẩn cấp:"})," ",(null==T?void 0:T.is_emergency)?"C\xf3":"Kh\xf4ng"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Ghi ch\xfa:"})," ",(null==T?void 0:T.comment)||"Kh\xf4ng c\xf3"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Ng\xe0y tạo:"})," ",Y(null==T?void 0:T.createdAt)]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"Cập nhật lần cuối:"})," ",Y(null==T?void 0:T.updatedAt)]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"\uD83D\uDEE0 Cập nhật trạng th\xe1i:"}),(0,a.jsxs)(o.l6,{onValueChange:Z,value:P,children:[(0,a.jsx)(o.bq,{className:"w-full md:w-[300px] border-gray-300",children:(0,a.jsx)(o.yv,{placeholder:"Chọn trạng th\xe1i"})}),(0,a.jsx)(o.gC,{children:[{key:"pending",label:"Đang chờ duyệt"},{key:"cancelled",label:"Đ\xe3 hủy"},{key:"rejected",label:"Bị từ chối"}].map(e=>(0,a.jsx)(o.eb,{value:e.key,children:e.label},e.key))})]}),(0,a.jsx)(r.$,{className:"mt-2 bg-blue-600 text-white hover:bg-blue-700",disabled:!P||P===(null==T?void 0:T.status),onClick:()=>Q(P),children:"Cập nhật trạng th\xe1i"})]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"T\xecnh trạng y\xeau cầu gần nhất"}),(0,a.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:J.length>0&&function(e,t,s){let a=e.find(e=>e.blood_type===t&&"RBC"===e.component);return a&&a.quantity>=s}(J,T.blood_type_needed,T.amount_needed)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-green-600 font-bold mb-2",children:["✅ C\xf3 đủ m\xe1u (",T.blood_type_needed,") trong kho"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mb-4",children:["Cần ",T.amount_needed," đơn vị nh\xf3m ",T.blood_type_needed]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600 bg-blue-50 px-4 py-2 rounded-lg border border-blue-200 w-fit mb-5",children:["\uD83D\uDC89 Hiện c\xf3: ",O(J,T.blood_type_needed,"RBC")," đơn vị"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(b.J,{htmlFor:"warehouse-donation-date",children:"Ng\xe0y hiến m\xe1u"}),(0,a.jsxs)("div",{className:"relative mt-5",children:[(0,a.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(v.p,{id:"warehouse-donation-date",type:"date",value:$,onChange:e=>U(e.target.value),className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(b.J,{htmlFor:"warehouse-comment",children:"Ghi ch\xfa"}),(0,a.jsx)(v.p,{id:"warehouse-comment",placeholder:"Nhập ghi ch\xfa khi lấy m\xe1u từ kho...",value:L,onChange:e=>V(e.target.value),className:"mt-5"})]}),(0,a.jsx)(r.$,{onClick:X,className:"bg-purple-600 text-white hover:bg-purple-700",disabled:!$,children:"✅ X\xe1c nhận lấy m\xe1u từ kho"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-red-600 font-bold",children:["❌ Kh\xf4ng đủ m\xe1u ",T.blood_type_needed," trong kho"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mb-1",children:["Cần ",T.amount_needed," đơn vị nh\xf3m ",T.blood_type_needed]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-red-600 bg-red-50 px-4 py-2 rounded-lg border border-red-200 w-fit mb-5",children:["\uD83D\uDC89 Hiện c\xf3: ",O(J,T.blood_type_needed,"RBC")," đơn vị"]})]})})]}),(0,a.jsxs)(i.Zp,{className:"shadow-lg rounded-2xl",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{className:"text-2xl font-bold",children:"\uD83E\uDE7A Người hiến m\xe1u khả dụng"}),(0,a.jsx)(i.BT,{className:"text-gray-600",children:"Danh s\xe1ch người hiến ph\xf9 hợp theo nh\xf3m m\xe1u & khoảng c\xe1ch"})]}),(0,a.jsx)(i.Wu,{className:"space-y-4",children:0===q.length?(0,a.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm thấy người hiến ph\xf9 hợp."}):Array.isArray(null==q?void 0:q.donors)&&q.donors.map(e=>(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-4 border rounded-xl bg-gray-50 hover:shadow transition",children:[(0,a.jsxs)("div",{className:"space-y-1 mb-4 md:mb-0",children:[(0,a.jsx)("p",{className:"font-semibold text-lg",children:e.user_id.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.user_id.email," | \uD83D\uDCDE ",e.user_id.phone," | ",e.hospital.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Nh\xf3m m\xe1u: ",e.blood_type||"Kh\xf4ng r\xf5"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Bắt đầu hiến từ: ",Y(e.availability_date)]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-2 md:space-y-0 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(b.J,{className:"mb-5",htmlFor:"donation-date-".concat(e._id),children:"Ng\xe0y hiến m\xe1u"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(v.p,{id:"donation-date-".concat(e._id),type:"date",value:z,onChange:e=>I(e.target.value),className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(b.J,{className:"mb-5",htmlFor:"comment-".concat(e._id),children:"Ghi ch\xfa"}),(0,a.jsx)(v.p,{id:"comment-".concat(e._id),type:"text",value:L,onChange:e=>V(e.target.value),placeholder:"Nhập ghi ch\xfa...",className:"w-full md:w-48"})]}),(0,a.jsxs)(r.$,{size:"sm",className:"bg-green-600 text-white hover:bg-green-700",onClick:()=>ee(e.user_id._id),children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"Gh\xe9p"]}),(0,a.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>window.location.href="tel:".concat(e.user_id.phone),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"Gọi"]})]})]},e._id))})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(r.$,{onClick:()=>k.back(),variant:"outline",className:"px-6 py-3 rounded-xl",children:"← Quay lại"})})]}),(0,a.jsx)(f.l$,{position:"top-center",containerStyle:{top:80}}),(0,a.jsx)(x.Footer,{})]}):(0,a.jsx)("p",{className:"p-8 text-center text-gray-600",children:"Đang tải dữ liệu..."})}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(5155),n=s(2115),l=s(3999);let r=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});r.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[6237,6222,3464,3568,461,1975,7949,8441,1684,7358],()=>t(2402)),_N_E=e.O()}]);